let toastTimeout;
/*!
* CookieConsent 3.0.0
* https://github.com/orestbida/cookieconsent/tree/v3
* Author Orest Bida
* Released under the MIT License
*/
var e,t;window.showToast=(e,t=4e3)=>{const n=document.getElementById("custom-toast-notification"),o=document.getElementById("toast-message-text"),s=n?n.querySelector(".toast-icon"):null;n&&o&&s?(clearTimeout(toastTimeout),o.textContent=e,s.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2.5" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M9 12.75L11.25 15 15 9.75M21 12a9 9 0 11-18 0 9 9 0 0118 0z" /></svg>',n.classList.add("show"),toastTimeout=setTimeout(()=>{n.classList.remove("show")},t)):console.warn("Toast elements not found. Message:",e)},document.addEventListener("DOMContentLoaded",()=>{const e=document.body,t=document.getElementById("theme-toggle-btn"),n=document.getElementById("mobile-theme-toggle"),o=t=>{e.classList.remove("light-mode","dark-mode"),e.classList.add(t),localStorage.setItem("theme",t)},s=e=>{n&&(n.checked="dark-mode"===e)};t&&t.addEventListener("click",()=>{const t=e.classList.contains("dark-mode")?"light-mode":"dark-mode";o(t),s(t)}),n&&n.addEventListener("change",()=>{const e=n.checked?"dark-mode":"light-mode";o(e)});const a=localStorage.getItem("theme")||"light-mode";o(a),s(a);const i=document.getElementById("hamburger"),r=document.getElementById("mobile-menu"),c=document.getElementById("nav-overlay"),l=document.getElementById("mobile-nav-close");if(i&&r&&c&&l){const t=()=>{const t="true"===i.getAttribute("aria-expanded");i.classList.toggle("active"),r.classList.toggle("active"),c.classList.toggle("active"),e.classList.toggle("no-scroll"),i.setAttribute("aria-expanded",!t)};i.addEventListener("click",t),c.addEventListener("click",t),l.addEventListener("click",t),document.addEventListener("keydown",e=>{"Escape"===e.key&&r.classList.contains("active")&&t()})}const d=document.getElementById("search-toggle-btn"),u=document.getElementById("search-overlay"),m=document.getElementById("search-close-btn");if(d&&u&&m){const t=()=>{u.classList.add("active"),e.classList.add("no-scroll"),setTimeout(()=>document.getElementById("search-input")?.focus(),400)},n=()=>{u.classList.remove("active"),r&&r.classList.contains("active")||e.classList.remove("no-scroll")};d.addEventListener("click",t),m.addEventListener("click",n),u.addEventListener("click",e=>{e.target===u&&n()}),document.addEventListener("keydown",e=>{"Escape"===e.key&&u.classList.contains("active")&&n()})}const p=document.getElementById("lang-dropdown");if(p){const e=document.getElementById("lang-dropdown-toggle");e.addEventListener("click",t=>{t.stopPropagation(),p.classList.toggle("is-open");const n=p.classList.contains("is-open");e.setAttribute("aria-expanded",n)}),document.addEventListener("click",t=>{p.classList.contains("is-open")&&(p.classList.remove("is-open"),e.setAttribute("aria-expanded","false"))})}const y=document.querySelectorAll(".nav-link, .mobile-nav-link");if(y.length>0){if(!document.getElementById("hero-section")){(()=>{const e=window.location.pathname;y.forEach(t=>{const n=new URL(t.href,window.location.origin).pathname;t.classList.remove("active"),e===n&&t.classList.add("active")})})()}}const g=document.getElementById("header");if(g){const e=()=>{g.classList.toggle("scrolled",window.scrollY>10)};window.addEventListener("scroll",e),e()}window.addEventListener("resize",()=>{window.innerWidth>820&&r&&r.classList.contains("active")&&i?.click()});const h=document.querySelectorAll(".brand-promise, .promise-block, .three-promises-title, .showcase-title, .product-card, .pack-card, .testimonials-section, .invitation-card, .site-footer");if(h.length>0){const e=new IntersectionObserver(t=>{t.forEach(t=>{t.isIntersecting&&(t.target.classList.add("is-visible"),e.unobserve(t.target))})},{threshold:.1,rootMargin:"0px 0px -50px 0px"});h.forEach(t=>e.observe(t))}(()=>{const e=document.querySelector(".product-carousel");if(e){const t=e.querySelectorAll(".swiper-slide"),n=3;new Swiper(e,{loop:t.length>n,autoplay:{delay:4e3,disableOnInteraction:!0},navigation:{nextEl:".product-swiper-next",prevEl:".product-swiper-prev"},slidesPerView:1,centeredSlides:!0,spaceBetween:20,breakpoints:{600:{slidesPerView:2,spaceBetween:20,centeredSlides:!1},1024:{slidesPerView:n,spaceBetween:30,centeredSlides:!1}}})}const t=document.querySelector(".packs-carousel");if(t){const e=t.querySelectorAll(".swiper-slide"),n=3;new Swiper(t,{loop:e.length>n,autoplay:{delay:5e3,disableOnInteraction:!0},navigation:{nextEl:".packs-swiper-next",prevEl:".packs-swiper-prev"},slidesPerView:1.2,spaceBetween:20,slidesPerView:1,centeredSlides:!0,breakpoints:{600:{slidesPerView:2,spaceBetween:20,centeredSlides:!1},1024:{slidesPerView:n,spaceBetween:30,centeredSlides:!1}}})}})();const v=document.querySelectorAll(".testimonial-card"),f=document.querySelector(".prev-btn"),w=document.querySelector(".next-btn");if(v.length>1&&f&&w){let e=1;const t=()=>{v.forEach((t,n)=>{t.className="testimonial-card",n===e?t.classList.add("active"):n===(e-1+v.length)%v.length?t.classList.add("prev"):n===(e+1)%v.length&&t.classList.add("next")})};w.addEventListener("click",()=>{e=(e+1)%v.length,t()}),f.addEventListener("click",()=>{e=(e-1+v.length)%v.length,t()}),v.forEach(e=>{e.addEventListener("click",()=>{e.classList.contains("next")?w.click():e.classList.contains("prev")&&f.click()})}),t()}const E=document.querySelectorAll(".password-toggle-btn");E.length>0&&E.forEach(e=>{e.addEventListener("click",()=>{const t=e.closest(".password-wrapper").querySelector("input");"password"===t.type?(t.type="text",e.classList.add("is-showing"),e.setAttribute("aria-label","Masquer le mot de passe")):(t.type="password",e.classList.remove("is-showing"),e.setAttribute("aria-label","Afficher le mot de passe"))})});const L=document.getElementById("login-prompt-modal"),k=document.getElementById("login-prompt-close-btn"),b=()=>{L&&L.classList.remove("active")};L&&k&&(k.addEventListener("click",b),L.addEventListener("click",e=>{e.target===L&&b()})),document.body.addEventListener("click",async e=>{const t=e.target.closest(".wishlist-btn");if(!t)return;if(!USER_DETAILS)return void(L&&L.classList.add("active"));const n=t.dataset.itemId,o=t.dataset.itemType;try{const e=await fetch("/api/wishlist/toggle",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({itemId:n,itemType:o})}),s=await e.json();if(s.success){t.classList.toggle("active","added"===s.action),window.showToast&&s.message&&window.showToast(s.message);const e=document.querySelector(".wishlist-grid");if(e&&"removed"===s.action){const n=t.closest(".product-card, .pack-card");n&&(n.style.transition="opacity 0.3s ease",n.style.opacity="0",setTimeout(()=>{if(n.remove(),0===e.children.length){document.querySelector(".account-content .content-body").innerHTML='\n                                   <div class="no-orders-message">\n                                       <p>Votre wishlist est vide.</p>\n                                       <a href="/" class="btn-primary">Explorer la collection</a>\n                                   </div>\n                               '}},300))}}else console.error("Wishlist error:",s.message)}catch(e){console.error("Failed to toggle wishlist:",e)}});if(document.getElementById("hero-section")){const e=document.querySelectorAll("main section[id]"),t=document.querySelectorAll(".nav-link, .mobile-nav-link"),n=new IntersectionObserver(e=>{e.forEach(e=>{if(e.isIntersecting){const n=e.target.getAttribute("id");let o;o="hero-section"===n?document.querySelector('.nav-link[href="/"], .mobile-nav-link[href="/"]'):document.querySelector(`.nav-link[href$="#${n}"], .mobile-nav-link[href$="#${n}"]`),t.forEach(e=>e.classList.remove("active")),o&&o.classList.add("active")}})},{root:null,rootMargin:"0px",threshold:.6});e.forEach(e=>{n.observe(e)});document.querySelectorAll('a[href="/"]').forEach(e=>{e.addEventListener("click",e=>{"/"===window.location.pathname&&(e.preventDefault(),window.scrollTo({top:0,behavior:"smooth"}),t.forEach(e=>e.classList.remove("active")),document.querySelector('.nav-link[href="/"]').classList.add("active"),document.querySelector('.mobile-nav-link[href="/"]').classList.add("active"))})})}const I=document.getElementById("search-input"),S=document.getElementById("search-results-container");if(I&&S){const e=(e,t)=>{let n;return(...o)=>{clearTimeout(n),n=setTimeout(()=>{e.apply(this,o)},t)}},t=e=>{S.innerHTML="",0===e.length?S.innerHTML='<div class="search-no-results">Aucun résultat trouvé.</div>':e.forEach(e=>{const t=document.createElement("a");t.href=e.url,t.className="search-result-item",t.innerHTML=`\n                        <img src="${e.image}" alt="${e.name}" class="search-result-image">\n                        <div class="search-result-info">\n                            <span class="search-result-name">${e.name}</span>\n                        </div>\n                    `,S.appendChild(t)}),S.classList.add("visible")},n=async e=>{if(e.length<2)return S.innerHTML="",void S.classList.remove("visible");try{const n=await fetch(`/api/search?q=${encodeURIComponent(e)}`);if(!n.ok)throw new Error("Network response was not ok");const o=await n.json();t(o)}catch(e){console.error("Search fetch error:",e),S.innerHTML='<div class="search-no-results">Erreur lors de la recherche.</div>',S.classList.add("visible")}};I.addEventListener("input",e(e=>{n(e.target.value.trim())},300));const o=document.getElementById("search-close-btn"),s=document.getElementById("search-overlay");if(o&&s){const e=()=>{I.value="",S.innerHTML="",S.classList.remove("visible")};o.addEventListener("click",e),s.addEventListener("click",t=>{t.target===s&&e()})}}const T=document.querySelector(".contact-success-message");T&&setTimeout(()=>{T.classList.add("visible")},100)}),window.showUndoToast=function(e,t,n=null){const o=document.getElementById("undo-toast-notification"),s=document.getElementById("undo-toast-message"),a=document.getElementById("undo-toast-button"),i=document.getElementById("undo-toast-progress");if(!(o&&s&&a&&i))return console.warn("Undo toast elements not found. Executing callback immediately."),void t();let r,c,l=10;clearTimeout(window.undoToastTimerId),clearInterval(window.undoToastIntervalId),i.style.transition="none",i.style.width="100%";a.onclick=()=>{clearTimeout(r),clearInterval(c),o.classList.remove("show"),n&&(n.textContent=window.translations.placeOrder,n.disabled=!1)},o.classList.add("show"),i.offsetWidth,s.textContent=e.replace("{{count}}",l),i.style.transition=`width ${l}s linear`,i.style.width="0%",c=setInterval(()=>{l--,s.textContent=l>0?e.replace("{{count}}",l):window.translations.sendingInProgress},1e3),r=setTimeout(()=>{clearInterval(c),o.classList.remove("show"),t()},1e3*l),window.undoToastTimerId=r,window.undoToastIntervalId=c},window.addEventListener("load",()=>{const e=document.querySelector(".loader-wrapper"),t=document.body;setTimeout(()=>{e&&e.classList.add("hidden");const n=document.getElementById("mobile-menu");n&&n.classList.contains("active")||t.classList.remove("no-scroll")},500)}),document.addEventListener("DOMContentLoaded",()=>{const e=document.getElementById("add-to-cart-btn");window.updateCartIcon=()=>{let e=0;if("undefined"!=typeof USER_DETAILS&&null!==USER_DETAILS){const t=USER_DETAILS.cart||[];e=t.reduce((e,t)=>e+t.quantity,0)}else{const t=JSON.parse(localStorage.getItem("bloomCart"))||[];e=t.reduce((e,t)=>e+t.quantity,0)}document.querySelectorAll(".cart-icon").forEach(t=>{let n=t.querySelector(".cart-item-count");n||(n=document.createElement("span"),n.className="cart-item-count",t.appendChild(n)),e>0?(n.textContent=e,n.style.display="flex"):n.style.display="none"})};e&&e.addEventListener("click",()=>{(async t=>{if(!t||!t.id||!t.name||null==t.price)return console.error("Attempted to add an invalid item to the cart:",t),void alert("Désolé, une erreur s'est produite lors de l'ajout de cet article.");const n=document.getElementById("quantity-display"),o=n?parseInt(n.textContent,10):1,s="undefined"!=typeof USER_DETAILS&&null!==USER_DETAILS,a=window.translations.itemAddedToCart.replace("{{itemName}}",`${o} x ${t.name}`);if(s)try{const e=await fetch("/api/cart",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({productId:t.isPack?void 0:t.id,packId:t.isPack?t.id:void 0,quantity:o,name:t.name,price:t.price,image:t.image,isPack:t.isPack})}),n=await e.json();if(!n.success)throw new Error(n.message||"Server error");USER_DETAILS.cart=n.cart,window.showToast(a),window.updateCartIcon()}catch(e){console.error("Error adding item to database cart:",e),alert("Impossible d'ajouter l'article au panier. Veuillez réessayer.")}else{let n=JSON.parse(localStorage.getItem("bloomCart"))||[];const s=e.dataset.productId||e.dataset.packId,i=n.findIndex(e=>e.id===s);if(i>-1)n[i].quantity+=o;else{const e={id:s,name:t.name,price:t.price,image:t.image,isPack:t.isPack,quantity:o};n.push(e)}localStorage.setItem("bloomCart",JSON.stringify(n)),window.showToast(a),window.updateCartIcon()}})({id:e.dataset.productId,name:e.dataset.productName,price:parseFloat(e.dataset.productPrice),image:e.dataset.productImage,isPack:"true"===e.dataset.isPack})}),setTimeout(()=>{window.updateCartIcon()},100)}),document.addEventListener("DOMContentLoaded",()=>{const e=document.getElementById("cart-content-wrapper");if(!e)return;const t="undefined"!=typeof USER_DETAILS&&null!==USER_DETAILS;let n=[],o=new Map;const s=document.getElementById("empty-cart-container"),a=document.getElementById("cart-items-panel"),i=document.getElementById("summary-subtotal"),r=document.getElementById("summary-shipping"),c=document.getElementById("summary-total"),l=document.getElementById("summary-wilaya"),d=document.querySelectorAll('input[name="summary-delivery"]'),u=document.querySelector('input[value="stopdesk"]'),m=document.querySelector('input[value="home"]'),p=document.getElementById("stopdesk-info-box"),y=document.getElementById("checkout-btn"),g=document.getElementById("checkout-details-form"),h=document.getElementById("checkout-address-group"),v=document.getElementById("checkout-phone"),f=document.getElementById("phone-error-message"),w=document.getElementById("confirm-order-btn"),E=document.getElementById("cart-confirm-modal"),L=document.getElementById("cart-confirm-cancel-btn"),k=document.getElementById("cart-confirm-confirm-btn");let b=null;const I=e=>{const t="ar"===(document.documentElement.lang||"ar")?"د.ج":"DA";return`${parseFloat(e).toFixed(2)} ${t}`},S=()=>t?USER_DETAILS.cart||[]:JSON.parse(localStorage.getItem("bloomCart"))||[],T=()=>{const t=S(),n=document.documentElement.lang||"ar";0===t.length?(e.style.display="none",s.style.display="block"):(e.style.display="block",s.style.display="none",a.innerHTML="",t.forEach(e=>{const t=e.productId||e.packId||e.id,o=e.name&&"object"==typeof e.name?e.name[n]||e.name.fr:e.name,s=document.createElement("div");s.className="cart-page-item",s.innerHTML=`\n                <img src="${e.image}" alt="${o}" class="cart-page-item-image">\n                <div class="cart-page-item-details">\n                    <p class="cart-page-item-name">${o}</p>\n                    <p class="cart-page-item-price">${I(e.price)}</p>\n                </div>\n                <div class="quantity-selector">\n                    <button class="quantity-btn" data-id="${t}" data-is-pack="${e.isPack}" data-action="decrease">-</button>\n                    <span>${e.quantity}</span>\n                    <button class="quantity-btn" data-id="${t}" data-is-pack="${e.isPack}" data-action="increase">+</button>\n                </div>\n                <div class="item-total">${I(e.price*e.quantity)}</div>\n                <button class="remove-item-btn" data-id="${t}" data-is-pack="${e.isPack}">\n                    <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="3 6 5 6 21 6"></polyline><path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"></path></svg>\n                </button>\n                `,a.appendChild(s)})),C(),"function"==typeof window.updateCartIcon&&window.updateCartIcon()},C=()=>{const e=S().reduce((e,t)=>e+t.price*t.quantity,0),t=l.value;let n=0,s=0;if(t&&o.has(t)){const e=o.get(t),s=document.querySelector('input[name="summary-delivery"]:checked').value;"home"===s?n=e.homePrice:"stopdesk"===s&&e.hasStopdesk&&(n=e.stopdeskPrice)}if(document.getElementById("shipping-discount-notice").textContent="",e>1e4)s=0;else if(e>7900){s="stopdesk"===document.querySelector('input[name="summary-delivery"]:checked').value?0:Math.max(0,n-400)}else s=n;const a=e+s;i.textContent=I(e),c.textContent=I(a),r.innerHTML="",t?s<n?r.innerHTML=`<span class="original-price">${I(n)}</span> ${I(s)}`:r.textContent=I(s):r.textContent=I(0)},B=()=>{const e=document.querySelector('input[name="summary-delivery"]:checked').value,t=l.value;if(h.style.display="home"===e?"block":"none","stopdesk"===e&&t&&o.get(t)?.hasStopdesk){const e=o.get(t).stopdeskInfo;p.innerHTML=`\n                <p>\n                 <a href="${e.gmaps}" target="_blank" rel="noopener noreferrer" class="stopdesk-gmaps-link">\n                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"></path><polyline points="15 3 21 3 21 9"></polyline><line x1="10" y1="14" x2="21" y2="3"></line></svg>\n                ${window.translations.stopDeskInfo}\n            </a>\n            </p>\n            `,p.style.display="block"}else p.style.display="none",p.innerHTML="";C()},q=async()=>{if(!b)return;const{id:e,isPack:n}=b;if(t){const t=await fetch("/api/cart",{method:"DELETE",headers:{"Content-Type":"application/json"},body:JSON.stringify({productId:n?void 0:e,packId:n?e:void 0,isPack:n})});(await t.json()).success&&(USER_DETAILS.cart=USER_DETAILS.cart.filter(t=>(t.productId||t.packId)!=e),T())}else{let t=S();const n=t.findIndex(t=>t.id===e);n>-1&&(t.splice(n,1),localStorage.setItem("bloomCart",JSON.stringify(t)),T())}x()},x=()=>{E.classList.remove("active"),b=null};a.addEventListener("click",async e=>{const n=e.target.closest(".quantity-btn, .remove-item-btn");if(!n)return;const o=n.dataset.id,s="true"===n.dataset.isPack;if(n.matches(".quantity-btn")){const e=n.dataset.action;if(t){let t=S().find(e=>(e.productId||e.packId)==o).quantity;"increase"===e?t++:"decrease"===e&&t--;const n=await fetch("/api/cart",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({productId:s?void 0:o,packId:s?o:void 0,quantity:t,isPack:s})}),a=await n.json();a.success&&(USER_DETAILS.cart=a.cart,T())}else{let t=S();const n=t.findIndex(e=>e.id===o);if(-1===n)return;"increase"===e?t[n].quantity++:"decrease"===e&&t[n].quantity>1&&t[n].quantity--,localStorage.setItem("bloomCart",JSON.stringify(t)),T()}}else n.matches(".remove-item-btn")&&(b={id:o,isPack:s},E.classList.add("active"))}),l.addEventListener("change",()=>{const e=l.value;if(p.style.display="none",p.innerHTML="",e&&o.has(e)){o.get(e).hasStopdesk?(u.disabled=!1,u.parentElement.style.opacity=1,u.parentElement.style.cursor="pointer"):(u.disabled=!0,u.parentElement.style.opacity=.5,u.parentElement.style.cursor="not-allowed",m.checked=!0)}else u.disabled=!1,u.parentElement.style.opacity=1,u.parentElement.style.cursor="pointer";document.querySelector('input[name="summary-delivery"]:checked').dispatchEvent(new Event("change"))}),d.forEach(e=>e.addEventListener("change",B)),v.addEventListener("input",()=>{const e=v.value;/^\d*$/.test(e)?f.textContent="":f.textContent=window.translations.invalidPhoneNumber}),y.addEventListener("click",()=>{if(l.value){if(y.style.display="none",g.style.display="block",t&&USER_DETAILS.shippingInfo){const e=USER_DETAILS.shippingInfo;document.getElementById("checkout-name").value=e.fullName||"",document.getElementById("checkout-phone").value=e.phone||"",document.getElementById("checkout-address").value=e.address||""}}else window.showToast(window.translations.selectWilayaToast,3e3)}),w&&w.addEventListener("click",()=>{const e=document.getElementById("checkout-name"),n=document.getElementById("checkout-phone"),o=document.getElementById("checkout-address"),s=document.querySelector('input[name="summary-delivery"]:checked').value;if(!e.value.trim()||!n.value.trim()||!l.value)return void window.showToast(window.translations.fillRequiredFields,3e3,!0);if("home"===s&&!o.value.trim())return void window.showToast(window.translations.enterAddress,3e3,!0);if(""!==f.textContent)return void window.showToast(window.translations.invalidPhoneNumber,3e3,!0);w.textContent=window.translations.sending,w.disabled=!0;window.showUndoToast(window.translations.orderWillBeSent,async()=>{const a=S().map(e=>({productId:e.isPack?null:e.productId||e.id,packId:e.isPack?e.packId||e.id:null,quantity:e.quantity,name:e.name,image:e.image,isPack:e.isPack})),i={customer:{fullName:e.value.trim(),phone:n.value.trim(),wilaya:l.value,deliveryMethod:s,address:o.value.trim()},items:a,shippingCost:0,total:c.textContent};try{const e=await fetch("/create-order",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(i)}),n=await e.json();n.success?(window.showToast(window.translations.orderReceived,4e3),t?fetch("/api/cart/clear",{method:"DELETE"}).then(()=>{setTimeout(()=>{window.location.href="/compte"},4e3)}):(localStorage.removeItem("bloomCart"),setTimeout(()=>{window.location.href="/"},4e3))):(window.showToast(n.message||"Une erreur est survenue.",3e3,!0),w.textContent=window.translations.placeOrder,w.disabled=!1)}catch(e){console.error("Error submitting order:",e),window.showToast(window.translations.connectionError,3e3,!0),w.textContent=window.translations.placeOrder,w.disabled=!1}},w)}),E&&(k.addEventListener("click",q),L.addEventListener("click",x),E.addEventListener("click",e=>{e.target===E&&x()}));(async()=>{try{const e=await fetch("/api/shipping-info");if(!e.ok)throw new Error("Failed to fetch shipping info");n=await e.json(),o=new Map(n.map(e=>[e.name.fr,e])),(()=>{if(!l||l.options.length>1)return;const e=document.documentElement.lang||"ar";n.forEach(t=>{const n=new Option(t.name[e]||t.name.fr,t.name.fr);l.add(n)})})();const s=S();if(s.length>0){const e=s.map(e=>({id:e.productId||e.packId||e.id,isPack:e.isPack,quantity:e.quantity})),n=await fetch("/api/cart/sync",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({items:e})});if(!n.ok)throw new Error("Sync request failed");const o=await n.json();if(o.success)if(t)USER_DETAILS.cart=o.cart;else{const e=o.cart.map(e=>({id:e.productId||e.packId,name:e.name,price:e.price,image:e.image,isPack:e.isPack,quantity:e.quantity}));localStorage.setItem("bloomCart",JSON.stringify(e))}}T(),t&&USER_DETAILS.shippingInfo&&USER_DETAILS.shippingInfo.wilaya&&setTimeout(()=>{l.value=USER_DETAILS.shippingInfo.wilaya,l.dispatchEvent(new Event("change"))},100)}catch(t){console.error("Error initializing cart page:",t),e.innerHTML='<p style="text-align: center; color: #e74c3c;">Impossible de charger les informations de livraison. Veuillez rafraîchir la page.</p>'}})()}),document.addEventListener("DOMContentLoaded",()=>{const e=window.productData||{},t=window.USER_DETAILS||null,n=document.getElementById("product-price"),o=document.getElementById("quantity-display"),s=document.getElementById("quantity-minus"),a=document.getElementById("quantity-plus"),i=document.getElementById("reviews-list"),r=document.getElementById("leave-review-btn"),c=document.getElementById("review-modal"),l=document.getElementById("review-modal-close-btn"),d=document.getElementById("review-form"),u=document.querySelector(".star-rating-input"),m=document.getElementById("rating-input"),p=document.getElementById("review-comment"),y=document.getElementById("review-form-error"),g=document.getElementById("login-prompt-modal"),h=document.getElementById("prompt-modal-close-btn"),v=document.getElementById("review-delete-confirm-modal"),f=document.getElementById("review-delete-cancel-btn"),w=document.getElementById("review-delete-confirm-btn");let E=null,L=1;const k=parseFloat(e.price)||0;function b(){if(!n||!o)return;const e=k*L;n.textContent=function(e){const t="ar"===(document.documentElement.lang||"ar")?"د.ج":"DA";return`${parseFloat(e).toFixed(2)} ${t}`}(e),o.textContent=L,s&&(s.disabled=L<=1)}function I(){c&&c.classList.remove("active")}function S(e,t=!1){u.querySelectorAll(".star").forEach(n=>{n.classList.toggle("selected",n.dataset.value<=e),n.classList.toggle("hover",t&&n.dataset.value<=e)})}async function T(n){n.preventDefault();const o=m.value,s=p.value.trim();if("0"===o||!s)return y.textContent="Veuillez fournir une note et un commentaire.",void(y.style.display="block");y.style.display="none";try{const n=await fetch(`/api/products/${e._id}/reviews`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({rating:o,comment:s})}),a=await n.json();if(a.success){I(),window.showToast("Avis ajouté avec succès !");const e=function(e){const n=document.createElement("div");n.className="review-card";const o=new Date(e.createdAt).toLocaleDateString("fr-FR"),s=e.user&&e.user.email?`<span class="review-card-email">${function(e){if(!e)return"";const[t,n]=e.split("@");return t.length<=3?`${t.slice(0,1)}***@${n}`:`${t.slice(0,3)}***@${n}`}(e.user.email)}</span>`:"",a=t&&e.user&&t._id.toString()===e.user._id.toString()?`<button class="review-delete-btn" data-review-id="${e._id}" aria-label="Supprimer mon avis">\n                   <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"><path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"></path></svg>\n               </button>`:"";return n.innerHTML=`\n            ${a}\n            <div class="review-card-header">\n                <div class="review-card-author">\n                    <span class="review-card-name">${e.name}</span>\n                    ${s}\n                </div>\n                ${function(e){let t="";for(let n=0;n<5;n++)t+=`<div class="star-icon ${n<e?"":"empty"}"><svg fill="currentColor" viewBox="0 0 20 20"><path d="M10 15l-5.878 3.09 1.123-6.545L.489 6.91l6.572-.955L10 0l2.939 5.955 6.572.955-4.756 4.635 1.123 6.545z"/></svg></div>`;return`<div class="star-rating-display">${t}</div>`}(e.rating)}\n            </div>\n            <p class="review-card-comment">"${e.comment}"</p>\n            <div class="review-card-footer">\n                <span class="review-card-date">${o}</span>\n            </div>`,n}(a.review);i.querySelector(".no-reviews-message")&&(i.innerHTML=""),i.prepend(e)}else y.textContent=a.message||"Une erreur est survenue.",y.style.display="block"}catch(e){y.textContent="Erreur de connexion. Veuillez réessayer.",y.style.display="block"}}function C(){a?.addEventListener("click",()=>{L++,b()}),s?.addEventListener("click",()=>{L>1&&(L--,b())}),document.querySelectorAll(".tab-link").forEach(e=>{e.addEventListener("click",()=>{document.querySelector(".tab-link.active")?.classList.remove("active"),document.querySelector(".tab-panel.active")?.classList.remove("active"),e.classList.add("active");const t=document.getElementById(`tab-${e.dataset.tab}`);t?.classList.add("active")})});const e=document.getElementById("main-product-image"),n=document.getElementById("product-thumbnail-container");n?.addEventListener("click",t=>{const o=t.target.closest(".thumbnail-image");o&&!o.classList.contains("active")&&(e.src=o.dataset.src,n.querySelector(".active")?.classList.remove("active"),o.classList.add("active"))}),r?.addEventListener("click",()=>{t?c&&c.classList.add("active"):g?.classList.add("active")}),l?.addEventListener("click",I),c?.addEventListener("click",e=>{e.target===c&&I()}),d?.addEventListener("submit",T),h?.addEventListener("click",()=>g.classList.remove("active")),g?.addEventListener("click",e=>{e.target===g&&g.classList.remove("active")}),i?.addEventListener("click",e=>{const t=e.target.closest(".review-delete-btn");t&&(E=t.dataset.reviewId,v?.classList.add("active"))});const o=()=>{v?.classList.remove("active"),E=null};f?.addEventListener("click",o),v?.addEventListener("click",e=>{e.target===v&&o()}),w?.addEventListener("click",async()=>{if(E)try{const e=await fetch(`/api/reviews/${E}`,{method:"DELETE"}),t=await e.json();if(t.success){const e=document.querySelector(`.review-delete-btn[data-review-id="${E}"]`).closest(".review-card");e&&(e.style.transition="opacity 0.3s ease, transform 0.3s ease",e.style.opacity="0",e.style.transform="scale(0.95)",setTimeout(()=>{e.remove()},300)),window.showToast(t.message)}else window.showToast(t.message||"Une erreur est survenue.")}catch(e){console.error("Failed to delete review:",e),window.showToast("Erreur de connexion. Veuillez réessayer.")}finally{o()}})}b(),function(){if(u){u.innerHTML="";for(let e=1;e<=5;e++){const t=document.createElement("span");t.innerHTML="★",t.dataset.value=e,t.classList.add("star"),u.appendChild(t)}u.addEventListener("click",e=>{if(e.target.classList.contains("star")){const t=e.target.dataset.value;m.value=t,S(t)}}),u.addEventListener("mouseover",e=>{e.target.classList.contains("star")&&S(e.target.dataset.value,!0)}),u.addEventListener("mouseout",()=>{S(m.value)})}}(),C()}),document.addEventListener("DOMContentLoaded",()=>{let e=1,t=0;const n=document.getElementById("pack-price"),o=document.getElementById("quantity-display"),s=document.getElementById("quantity-minus"),a=document.getElementById("quantity-plus");function i(){if(!n||!o)return;const a=t*e;n.textContent=(e=>{const t="ar"===(document.documentElement.lang||"ar")?"د.ج":"DA";return`${parseFloat(e).toFixed(2)} ${t}`})(a),o.textContent=e,s.disabled=1===e}n&&(t=parseFloat(n.dataset.basePrice||"0"),i(),function(){a&&a.addEventListener("click",()=>{e++,i()}),s&&s.addEventListener("click",()=>{e>1&&(e--,i())});const t=document.getElementById("main-product-image"),n=document.getElementById("product-thumbnail-container");t&&n&&n.addEventListener("click",e=>{const o=e.target.closest(".thumbnail-image");if(!o||o.classList.contains("active"))return;t.src=o.dataset.src;const s=n.querySelector(".active");s&&s.classList.remove("active"),o.classList.add("active")})}())}),document.addEventListener("DOMContentLoaded",()=>{const e=document.getElementById("buy-now-btn"),t=document.getElementById("direct-checkout-drawer"),n=document.getElementById("drawer-overlay"),o=document.getElementById("drawer-close-btn"),s=(document.getElementById("drawer-panel"),document.getElementById("drawer-item-display")),a=document.getElementById("drawer-wilaya"),i=document.getElementById("drawer-total-price"),r=document.getElementById("drawer-confirm-order-btn"),c=document.getElementById("direct-checkout-form"),l=document.querySelectorAll('input[name="deliveryMethod"]'),d=document.getElementById("drawer-stopdesk-label"),u=document.getElementById("drawer-delivery-stopdesk"),m=document.getElementById("drawer-address-container"),p=document.getElementById("drawer-stopdesk-container"),y=document.getElementById("drawer-stopdesk-info"),g=e=>{const t="ar"===(document.documentElement.lang||"ar")?"د.ج":"DA";return`${parseFloat(e).toFixed(2)} ${t}`};let h=[],v=null,f=0;const w=()=>{if(!a)return;const e=document.documentElement.lang||"ar",t="ar"===e?"اختر ولايتك":"Sélectionnez votre wilaya";a.innerHTML=`<option value="" disabled selected>${t}</option>`,h.forEach(t=>{const n=document.createElement("option");n.value=t.name.fr,n.textContent=t.name[e]||t.name.fr,a.appendChild(n)})},E=()=>{"stopdesk"===document.querySelector('input[name="deliveryMethod"]:checked').value?(m.style.display="none",m.querySelector("textarea").required=!1,p.style.display="block"):(m.style.display="block",m.querySelector("textarea").required=!0,p.style.display="none"),k()},L=()=>{const e=a.value,t=h.find(t=>t.name.fr===e);t&&t.hasStopdesk?(d.classList.remove("disabled"),u.disabled=!1,y.innerHTML=`\n                <p>${t.stopdeskInfo.address}</p>\n                <a href="${t.stopdeskInfo.gmaps}" target="_blank" rel="noopener noreferrer">Voir sur Google Maps</a>\n            `):(d.classList.add("disabled"),u.disabled=!0,"stopdesk"===document.querySelector('input[name="deliveryMethod"]:checked').value&&(document.getElementById("drawer-delivery-home").checked=!0,E()),y.innerHTML="<p>Le service Stop Desk n'est pas disponible pour cette wilaya.</p>")},k=()=>{if(!v||!i||!a)return;const e=parseInt(document.getElementById("quantity-display")?.textContent||"1",10),t=parseFloat(v.price)*e,n=a.value,o=h.find(e=>e.name.fr===n),s=document.querySelector('input[name="deliveryMethod"]:checked').value;let r=0;o&&(r="stopdesk"===s&&o.hasStopdesk?parseFloat(o.stopdeskPrice):parseFloat(o.homePrice)),f=t>1e4?0:t>7900?"stopdesk"===s?0:Math.max(0,r-400):r;const c=t+f,l=document.getElementById("drawer-original-shipping-price");if(o&&f<r){const e=t+r;l.textContent=g(e),l.style.display="inline"}else l.style.display="none";i.textContent=g(c)},b=()=>{t&&(t.classList.remove("active"),document.body.classList.remove("no-scroll"))};e&&e.addEventListener("click",()=>{if(!t||!e)return;v={id:e.dataset.itemId,name:e.dataset.itemName,price:parseFloat(e.dataset.itemPrice),image:e.dataset.itemImage,isPack:"true"===e.dataset.isPack};const n=parseInt(document.getElementById("quantity-display")?.textContent||"1",10);s.innerHTML=`\n            <img src="${v.image}" alt="${v.name}" class="drawer-item-image">\n            <div class="drawer-item-details">\n                <div class="drawer-item-name">${n} x ${v.name}</div>\n                <div class="drawer-item-price">${g(v.price*n)}</div>\n            </div>\n        `;if("undefined"!=typeof USER_DETAILS&&null!==USER_DETAILS&&USER_DETAILS.shippingInfo){const e=USER_DETAILS.shippingInfo;document.getElementById("drawer-fullName").value=e.fullName||"",document.getElementById("drawer-phone").value=e.phone||"",document.getElementById("drawer-address").value=e.address||"",e.wilaya&&setTimeout(()=>{const t=document.getElementById("drawer-wilaya");t.value=e.wilaya,t.dispatchEvent(new Event("change"))},100)}document.getElementById("drawer-delivery-home").checked=!0,E(),L(),k(),t.classList.add("active"),document.body.classList.add("no-scroll")}),o&&o.addEventListener("click",b),n&&n.addEventListener("click",b),c&&c.addEventListener("submit",async e=>{if(e.preventDefault(),!(()=>{let e=!0;const t=c.querySelectorAll("[required]");return c.querySelectorAll(".form-group.error").forEach(e=>{e.classList.remove("error")}),t.forEach(t=>{const n=t.closest(".form-group");"none"===window.getComputedStyle(n).display||t.value.trim()||(e=!1,n&&n.classList.add("error"))}),e})())return;r.disabled=!0,r.textContent=window.translations.sending;const t=new FormData(c),n={fullName:t.get("fullName"),phone:t.get("phone"),wilaya:t.get("wilaya"),deliveryMethod:t.get("deliveryMethod"),address:"home"===t.get("deliveryMethod")?t.get("address"):""},o={...v,quantity:parseInt(document.getElementById("quantity-display")?.textContent||"1",10)};try{const e=await fetch("/create-direct-order",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({customer:n,item:o,shippingCost:f})}),t=await e.json();if(!e.ok){let e=t.message||"Une erreur est survenue.";throw t.errors&&t.errors.length>0&&(e=t.errors.map(e=>e.msg).join("\n")),new Error(e)}b(),window.showToast(window.translations.orderReceived),setTimeout(()=>{window.location.href="/"},2e3)}catch(e){console.error("Direct order submission error:",e),alert(`Erreur: ${e.message}`),r.disabled=!1,r.textContent=window.translations.confirmOrder}}),a&&a.addEventListener("change",()=>{k(),L()}),l.forEach(e=>{e.addEventListener("change",E)}),document.getElementById("quantity-plus")?.addEventListener("click",k),document.getElementById("quantity-minus")?.addEventListener("click",k),(async()=>{try{const e=await fetch("/api/shipping-info");if(!e.ok)throw new Error("Failed to fetch shipping data");h=await e.json(),w()}catch(e){console.error(e)}})()}),document.addEventListener("DOMContentLoaded",()=>{document.querySelectorAll(".magic-reveal-slider").forEach(e=>{const t=e.querySelector(".before-image-container"),n=e.querySelector(".slider-handle");let o=!1;const s=o=>{const s=e.getBoundingClientRect();let a=o-s.left;a<0&&(a=0),a>s.width&&(a=s.width);let i=a/s.width*100;t.style.width=`${i}%`,n.style.left=`${i}%`};e.addEventListener("mousedown",()=>o=!0),e.addEventListener("touchstart",()=>o=!0),window.addEventListener("mouseup",()=>o=!1),window.addEventListener("touchend",()=>o=!1),window.addEventListener("mousemove",e=>{o&&s(e.clientX)}),window.addEventListener("touchmove",e=>{o&&s(e.touches[0].clientX)})});const e=document.querySelectorAll(".masonry-item"),t=new IntersectionObserver(e=>{e.forEach((e,n)=>{e.isIntersecting&&(setTimeout(()=>{e.target.classList.add("is-visible")},100*n),t.unobserve(e.target))})},{threshold:.1});e.forEach(e=>t.observe(e));const n=document.getElementById("lightbox");if(n){const e=document.getElementById("lightbox-img"),t=Array.from(document.querySelectorAll(".masonry-item img"));let o=0;const s=s=>{s>=0&&s<t.length&&(o=s,e.src=t[o].src,n.classList.add("active"),document.body.classList.add("no-scroll"))},a=()=>{n.classList.remove("active"),document.body.classList.remove("no-scroll")};t.forEach((e,t)=>{e.addEventListener("click",()=>s(t))}),n.querySelector(".lightbox-close").addEventListener("click",a),n.querySelector(".lightbox-prev").addEventListener("click",()=>s(o-1)),n.querySelector(".lightbox-next").addEventListener("click",()=>s(o+1)),n.addEventListener("click",e=>{e.target===n&&a()}),document.addEventListener("keydown",e=>{n.classList.contains("active")&&("Escape"===e.key&&a(),"ArrowLeft"===e.key&&s(o-1),"ArrowRight"===e.key&&s(o+1))})}}),document.addEventListener("DOMContentLoaded",()=>{if(!document.querySelector(".faq-page"))return;const e=document.querySelectorAll(".faq-item"),t=document.querySelectorAll(".category-tab"),n=document.getElementById("faq-search-input"),o=document.getElementById("faq-no-results");e.forEach(t=>{t.querySelector(".faq-question").addEventListener("click",()=>{e.forEach(e=>{e!==t&&e.classList.contains("active")&&e.classList.remove("active")}),t.classList.toggle("active")})});const s=()=>{const t=n.value.toLowerCase().trim(),s=document.querySelector(".category-tab.active").dataset.category;let a=0;e.forEach(e=>{const n=e.querySelector(".faq-question span").textContent.toLowerCase(),o=e.querySelector(".faq-answer p").textContent.toLowerCase(),i=e.dataset.category,r="all"===s||i===s,c=n.includes(t)||o.includes(t);r&&c?(e.classList.remove("hidden"),a++):e.classList.add("hidden")}),o.style.display=0===a?"block":"none"};t.forEach(e=>{e.addEventListener("click",()=>{t.forEach(e=>e.classList.remove("active")),e.classList.add("active"),s()})}),n.addEventListener("input",s)}),e=this,t=function(e){"use strict";const t="opt-in",n="opt-out",o="show--consent",s="show--preferences",a="disable--interaction",i="data-category",r="div",c="button",l="aria-hidden",d="btn-group",u="click",m="data-role",p="consentModal",y="preferencesModal";class g{constructor(){this.t={mode:t,revision:0,autoShow:!0,lazyHtmlGeneration:!0,autoClearCookies:!0,manageScriptTags:!0,hideFromBots:!0,cookie:{name:"cc_cookie",expiresAfterDays:182,domain:"",path:"/",sameSite:"Lax"}},this.o={i:{},l:"",_:{},u:{},p:{},m:[],v:!1,h:null,C:null,S:null,M:"",T:!0,D:!1,k:!1,A:!1,N:!1,H:[],V:!1,j:!0,I:[],L:!1,F:"",P:!1,O:[],R:[],B:[],G:[],J:!1,U:!1,$:!1,q:[],K:[],W:[],X:{},Y:{},Z:{},ee:{},te:{},oe:[]},this.ne={se:{},ae:{}},this.ce={},this.re={ie:"cc:onFirstConsent",le:"cc:onConsent",de:"cc:onChange",fe:"cc:onModalShow",_e:"cc:onModalHide",ue:"cc:onModalReady"}}}const h=new g,v=(e,t)=>e.indexOf(t),f=(e,t)=>-1!==v(e,t),w=e=>Array.isArray(e),E=e=>"string"==typeof e,L=e=>!!e&&"object"==typeof e&&!w(e),k=e=>"function"==typeof e,b=e=>Object.keys(e),I=e=>Array.from(new Set(e)),S=()=>document.activeElement,T=e=>e.preventDefault(),C=(e,t)=>e.querySelectorAll(t),B=e=>e.dispatchEvent(new Event("change")),q=e=>{const t=document.createElement(e);return e===c&&(t.type=e),t},x=(e,t,n)=>e.setAttribute(t,n),M=(e,t,n)=>{e.removeAttribute(n?"data-"+t:t)},A=(e,t,n)=>e.getAttribute(n?"data-"+t:t),P=(e,t)=>e.appendChild(t),_=(e,t)=>e.classList.add(t),$=(e,t)=>_(e,"cm__"+t),D=(e,t)=>_(e,"pm__"+t),O=(e,t)=>e.classList.remove(t),H=e=>{if("object"!=typeof e)return e;if(e instanceof Date)return new Date(e.getTime());let t=Array.isArray(e)?[]:{};for(let n in e){let o=e[n];t[n]=H(o)}return t},R=()=>{const e={},{O:t,X:n,Y:o}=h.o;for(const s of t)e[s]=F(o[s],b(n[s]));return e},N=(e,t)=>dispatchEvent(new CustomEvent(e,{detail:t})),j=(e,t,n,o)=>{e.addEventListener(t,n),o&&h.o.m.push({pe:e,me:t,ge:n})},U=()=>{const e=h.t.cookie.expiresAfterDays;return k(e)?e(h.o.F):e},F=(e,t)=>{const n=e||[],o=t||[];return n.filter(e=>!f(o,e)).concat(o.filter(e=>!f(n,e)))},V=e=>{h.o.R=I(e),h.o.F=(()=>{let e="custom";const{R:t,O:n,B:o}=h.o,s=t.length;return s===n.length?e="all":s===o.length&&(e="necessary"),e})()},J=(e,t,n,o)=>{const s="accept-",{show:a,showPreferences:i,hide:r,hidePreferences:c,acceptCategory:l}=t,d=e||document,m=e=>C(d,`[data-cc="${e}"]`),p=(e,t)=>{T(e),l(t),c(),r()},y=m("show-preferencesModal"),g=m("show-consentModal"),v=m(s+"all"),f=m(s+"necessary"),w=m(s+"custom"),E=h.t.lazyHtmlGeneration;for(const e of y)x(e,"aria-haspopup","dialog"),j(e,u,e=>{T(e),i()}),E&&(j(e,"mouseenter",e=>{T(e),h.o.N||n(t,o)},!0),j(e,"focus",()=>{h.o.N||n(t,o)}));for(let e of g)x(e,"aria-haspopup","dialog"),j(e,u,e=>{T(e),a(!0)},!0);for(let e of v)j(e,u,e=>{p(e,"all")},!0);for(let e of w)j(e,u,e=>{p(e)},!0);for(let e of f)j(e,u,e=>{p(e,[])},!0)},z=(e,t)=>{e&&(t&&(e.tabIndex=-1),e.focus(),t&&e.removeAttribute("tabindex"))},Y=(e,t)=>{const n=o=>{o.target.removeEventListener("transitionend",n),"opacity"===o.propertyName&&"1"===getComputedStyle(e).opacity&&z((e=>1===e?h.ne.be:h.ne.ve)(t))};j(e,"transitionend",n)};let X;const G=e=>{clearTimeout(X),e?_(h.ne.ye,a):X=setTimeout(()=>{O(h.ne.ye,a)},500)},Z=["M 19.5 4.5 L 4.5 19.5 M 4.5 4.501 L 19.5 19.5","M 3.572 13.406 L 8.281 18.115 L 20.428 5.885","M 21.999 6.94 L 11.639 17.18 L 2.001 6.82 "],W=(e=0,t=1.5)=>`<svg viewBox="0 0 24 24" stroke-width="${t}"><path d="${Z[e]}"/></svg>`,K=e=>{const t=h.ne,n=h.o;(e=>{const o=e===t.he,s=n.i.disablePageInteraction?t.ye:o?t.Ce:t.ye;j(s,"keydown",t=>{if("Tab"!==t.key||!(o?n.k&&!n.A:n.A))return;const s=S(),a=o?n.q:n.K;0!==a.length&&(t.shiftKey?s!==a[0]&&e.contains(s)||(T(t),z(a[1])):s!==a[1]&&e.contains(s)||(T(t),z(a[0])))},!0)})(e)},Q=["[href]",c,"input","details","[tabindex]"].map(e=>e+':not([tabindex="-1"])').join(","),ee=e=>{const{o:t,ne:n}=h,o=(e,t)=>{const n=C(e,Q);t[0]=n[0],t[1]=n[n.length-1]};1===e&&t.D&&o(n.he,t.q),2===e&&t.N&&o(n.we,t.K)},te=(e,t,n)=>{const{de:o,le:s,ie:a,_e:i,ue:r,fe:c}=h.ce,l=h.re;if(t){const o={modalName:t};return e===l.fe?k(c)&&c(o):e===l._e?k(i)&&i(o):(o.modal=n,k(r)&&r(o)),N(e,o)}const d={cookie:h.o.p};e===l.ie?k(a)&&a(H(d)):e===l.le?k(s)&&s(H(d)):(d.changedCategories=h.o.I,d.changedServices=h.o.ee,k(o)&&o(H(d))),N(e,H(d))},ne=(e,t)=>{try{return e()}catch(e){return!t&&console.warn("CookieConsent:",e),!1}},oe=e=>{const{Y:t,ee:n,O:o,X:s,oe:a,p:r,I:c}=h.o;for(const e of o){const o=n[e]||t[e]||[];for(const n of o){const o=s[e][n];if(!o)continue;const{onAccept:a,onReject:i}=o;!o.Se&&f(t[e],n)&&k(a)?(o.Se=!0,a()):o.Se&&!f(t[e],n)&&k(i)&&(o.Se=!1,i())}}if(!h.t.manageScriptTags)return;const l=a,d=e||r.categories||[],u=(e,o)=>{if(o>=e.length)return;const s=a[o];if(s.xe)return u(e,o+1);const r=s.Me,l=s.Te,m=s.De,p=f(d,l),y=!!m&&f(t[l],m);if(!m&&!s.ke&&p||!m&&s.ke&&!p&&f(c,l)||m&&!s.ke&&y||m&&s.ke&&!y&&f(n[l]||[],m)){s.xe=!0;const t=A(r,"type",!0);M(r,"type",!!t),M(r,i);let n=A(r,"src",!0);n&&M(r,"src",!0);const a=q("script");a.textContent=r.innerHTML;for(const{nodeName:e}of r.attributes)x(a,e,r[e]||A(r,e));t&&(a.type=t),n?a.src=n:n=r.src;const c=!!n&&(!t||["text/javascript","module"].includes(t));if(c&&(a.onload=a.onerror=()=>{u(e,++o)}),r.replaceWith(a),c)return}u(e,++o)};u(l,0)},se="bottom",ae="left",ie="center",re="right",ce="inline",le="wide",de="pm--",ue=["middle","top",se],me=[ae,ie,re],pe={box:{Ae:[le,ce],Ee:ue,Ne:me,He:se,Ve:re},cloud:{Ae:[ce],Ee:ue,Ne:me,He:se,Ve:ie},bar:{Ae:[ce],Ee:ue.slice(1),Ne:[],He:se,Ve:""}},ye={box:{Ae:[],Ee:[],Ne:[],He:"",Ve:""},bar:{Ae:[le],Ee:[],Ne:[ae,re],He:"",Ve:ae}},ge=e=>{const t=h.o.i.guiOptions,n=t&&t.consentModal,o=t&&t.preferencesModal;0===e&&he(h.ne.he,pe,n,"cm--","box","cm"),1===e&&he(h.ne.we,ye,o,de,"box","pm")},he=(e,t,n,o,s,a)=>{e.className=a;const i=n&&n.layout,r=n&&n.position,c=n&&n.flipButtons,l=!n||!1!==n.equalWeightButtons,d=i&&i.split(" ")||[],u=d[0],m=d[1],p=u in t?u:s,y=t[p],g=f(y.Ae,m)&&m,v=r&&r.split(" ")||[],w=v[0],E=o===de?v[0]:v[1],L=f(y.Ee,w)?w:y.He,k=f(y.Ne,E)?E:y.Ve,b=t=>{t&&_(e,o+t)};b(p),b(g),b(L),b(k),c&&b("flip");const I=a+"__btn--secondary";if("cm"===a){const{je:e,Ie:t}=h.ne;e&&(l?O(e,I):_(e,I)),t&&(l?O(t,I):_(t,I))}else{const{Le:e}=h.ne;e&&(l?O(e,I):_(e,I))}},ve=(e,t)=>{const n=h.o,o=h.ne,{hide:s,hidePreferences:a,acceptCategory:i}=e,p=e=>{i(e),a(),s()},g=n.u&&n.u.preferencesModal;if(!g)return;const v=g.title,f=g.closeIconLabel,w=g.acceptAllBtn,k=g.acceptNecessaryBtn,I=g.savePreferencesBtn,S=g.sections||[],T=w||k||I;if(o.Fe)o.Pe=q(r),D(o.Pe,"body");else{o.Fe=q(r),_(o.Fe,"pm-wrapper");const e=q("div");_(e,"pm-overlay"),P(o.Fe,e),j(e,u,a),o.we=q(r),_(o.we,"pm"),x(o.we,"role","dialog"),x(o.we,l,!0),x(o.we,"aria-modal",!0),x(o.we,"aria-labelledby","pm__title"),j(o.ye,"keydown",e=>{27===e.keyCode&&a()},!0),o.Oe=q(r),D(o.Oe,"header"),o.Re=q("h2"),D(o.Re,"title"),o.Re.id="pm__title",o.Be=q(c),D(o.Be,"close-btn"),x(o.Be,"aria-label",g.closeIconLabel||""),j(o.Be,u,a),o.Ge=q("span"),o.Ge.innerHTML=W(),P(o.Be,o.Ge),o.Je=q(r),D(o.Je,"body"),o.Ue=q(r),D(o.Ue,"footer");var C=q(r);_(C,"btns");var B=q(r),M=q(r);D(B,d),D(M,d),P(o.Ue,B),P(o.Ue,M),P(o.Oe,o.Re),P(o.Oe,o.Be),o.ve=q(r),x(o.ve,"tabIndex",-1),P(o.we,o.ve),P(o.we,o.Oe),P(o.we,o.Je),T&&P(o.we,o.Ue),P(o.Fe,o.we)}let A;v&&(o.Re.innerHTML=v,f&&x(o.Be,"aria-label",f)),S.forEach((e,t)=>{const s=e.title,a=e.description,i=e.linkedCategory,d=i&&n.P[i],m=e.cookieTable,p=m&&m.body,y=m&&m.caption,h=p&&p.length>0,v=!!d,f=v&&n.X[i],w=L(f)&&b(f)||[],k=v&&(!!a||!!h||b(f).length>0);var I=q(r);if(D(I,"section"),k||a){var S=q(r);D(S,"section-desc-wrapper")}let T=w.length;if(k&&T>0){const e=q(r);D(e,"section-services");for(const t of w){const n=f[t],o=n&&n.label||t,s=q(r),a=q(r),c=q(r),l=q(r);D(s,"service"),D(l,"service-title"),D(a,"service-header"),D(c,"service-icon");const u=fe(o,t,d,!0,i);l.innerHTML=o,P(a,c),P(a,l),P(s,a),P(s,u),P(e,s)}P(S,e)}if(s){var C=q(r),B=q(v?c:r);if(D(C,"section-title-wrapper"),D(B,"section-title"),B.innerHTML=s,P(C,B),v){const e=q("span");e.innerHTML=W(2,3.5),D(e,"section-arrow"),P(C,e),I.className+="--toggle";const t=fe(s,i,d);let n=g.serviceCounterLabel;if(T>0&&E(n)){let e=q("span");D(e,"badge"),D(e,"service-counter"),x(e,l,!0),x(e,"data-servicecounter",T),n&&(n=n.split("|"),n=n.length>1&&T>1?n[1]:n[0],x(e,"data-counterlabel",n)),e.innerHTML=T+(n?" "+n:""),P(B,e)}if(k){D(I,"section--expandable");var M=i+"-desc";x(B,"aria-expanded",!1),x(B,"aria-controls",M)}P(C,t)}else x(B,"role","heading"),x(B,"aria-level","3");P(I,C)}if(a){var $=q("p");D($,"section-desc"),$.innerHTML=a,P(S,$)}if(k&&(x(S,l,"true"),S.id=M,((e,t,n)=>{j(B,u,()=>{t.classList.contains("is-expanded")?(O(t,"is-expanded"),x(n,"aria-expanded","false"),x(e,l,"true")):(_(t,"is-expanded"),x(n,"aria-expanded","true"),x(e,l,"false"))})})(S,I,B),h)){const e=q("table"),n=q("thead"),s=q("tbody");if(y){const t=q("caption");D(t,"table-caption"),t.innerHTML=y,e.appendChild(t)}D(e,"section-table"),D(n,"table-head"),D(s,"table-body");const a=m.headers,i=b(a),c=o.$e.createDocumentFragment(),l=q("tr");for(const e of i){const n=a[e],o=q("th");o.id="cc__row-"+n+t,x(o,"scope","col"),D(o,"table-th"),o.innerHTML=n,P(c,o)}P(l,c),P(n,l);const d=o.$e.createDocumentFragment();for(const e of p){const n=q("tr");D(n,"table-tr");for(const o of i){const s=a[o],i=e[o],c=q("td"),l=q(r);D(c,"table-td"),x(c,"data-column",s),x(c,"headers","cc__row-"+s+t),l.insertAdjacentHTML("beforeend",i),P(c,l),P(n,c)}P(d,n)}P(s,d),P(e,n),P(e,s),P(S,e)}(k||a)&&P(I,S);const H=o.Pe||o.Je;v?(A||(A=q(r),D(A,"section-toggles")),A.appendChild(I)):A=null,P(H,A||I)}),w&&(o.ze||(o.ze=q(c),D(o.ze,"btn"),x(o.ze,m,"all"),P(B,o.ze),j(o.ze,u,()=>p("all"))),o.ze.innerHTML=w),k&&(o.Le||(o.Le=q(c),D(o.Le,"btn"),x(o.Le,m,"necessary"),P(B,o.Le),j(o.Le,u,()=>p([]))),o.Le.innerHTML=k),I&&(o.qe||(o.qe=q(c),D(o.qe,"btn"),D(o.qe,"btn--secondary"),x(o.qe,m,"save"),P(M,o.qe),j(o.qe,u,()=>p())),o.qe.innerHTML=I),o.Pe&&(o.we.replaceChild(o.Pe,o.Je),o.Je=o.Pe),ge(1),n.N||(n.N=!0,te(h.re.ue,y,o.we),t(e),P(o.Ce,o.Fe),K(o.we),setTimeout(()=>_(o.Fe,"cc--anim"),100)),ee(2)};function fe(e,t,n,o,s){const a=h.o,r=h.ne,c=q("label"),d=q("input"),m=q("span"),p=q("span"),y=q("span"),g=q("span"),v=q("span");if(g.innerHTML=W(1,3),v.innerHTML=W(0,3),d.type="checkbox",_(c,"section__toggle-wrapper"),_(d,"section__toggle"),_(g,"toggle__icon-on"),_(v,"toggle__icon-off"),_(m,"toggle__icon"),_(p,"toggle__icon-circle"),_(y,"toggle__label"),x(m,l,"true"),o?(_(c,"toggle-service"),x(d,i,s),r.ae[s][t]=d):r.se[t]=d,o?(e=>{j(d,"change",()=>{const t=r.ae[e],n=r.se[e];a.Z[e]=[];for(let n in t){const o=t[n];o.checked&&a.Z[e].push(o.value)}n.checked=a.Z[e].length>0})})(s):(e=>{j(d,u,()=>{const t=r.ae[e],n=d.checked;a.Z[e]=[];for(let o in t)t[o].checked=n,n&&a.Z[e].push(o)})})(t),d.value=t,y.textContent=e.replace(/<.*>.*<\/.*>/gm,""),P(p,v),P(p,g),P(m,p),a.T)(n.readOnly||n.enabled)&&(d.checked=!0);else if(o){const e=a.Y[s];d.checked=n.readOnly||f(e,t)}else f(a.R,t)&&(d.checked=!0);return n.readOnly&&(d.disabled=!0),P(c,d),P(c,m),P(c,y),c}const we=()=>{const e=q("span");return h.ne.Ke||(h.ne.Ke=e),e},Ee=(e,t)=>{const n=h.o,o=h.ne,{hide:s,showPreferences:a,acceptCategory:i}=e,y=n.u&&n.u.consentModal;if(!y)return;const g=y.acceptAllBtn,v=y.acceptNecessaryBtn,f=y.showPreferencesBtn,w=y.closeIconLabel,E=y.footer,L=y.label,k=y.title,b=e=>{s(),i(e)};if(!o.Qe){o.Qe=q(r),o.he=q(r),o.We=q(r),o.Xe=q(r),o.Ye=q(r),_(o.Qe,"cm-wrapper"),_(o.he,"cm"),$(o.We,"body"),$(o.Xe,"texts"),$(o.Ye,"btns"),x(o.he,"role","dialog"),x(o.he,"aria-modal","true"),x(o.he,l,"false"),x(o.he,"aria-describedby","cm__desc"),L?x(o.he,"aria-label",L):k&&x(o.he,"aria-labelledby","cm__title");const e="box",t=n.i.guiOptions,s=t&&t.consentModal,a=(s&&s.layout||e).split(" ")[0]===e;k&&w&&a&&(o.Ie||(o.Ie=q(c),o.Ie.innerHTML=W(),$(o.Ie,"btn"),$(o.Ie,"btn--close"),j(o.Ie,u,()=>{b([])}),P(o.We,o.Ie)),x(o.Ie,"aria-label",w)),P(o.We,o.Xe),(g||v||f)&&P(o.We,o.Ye),o.be=q(r),x(o.be,"tabIndex",-1),P(o.he,o.be),P(o.he,o.We),P(o.Qe,o.he)}k&&(o.Ze||(o.Ze=q("h2"),o.Ze.className=o.Ze.id="cm__title",P(o.Xe,o.Ze)),o.Ze.innerHTML=k);let I=y.description;if(I&&(n.V&&(I=I.replace("{{revisionMessage}}",n.j?"":y.revisionMessage||"")),o.et||(o.et=q("p"),o.et.className=o.et.id="cm__desc",P(o.Xe,o.et)),o.et.innerHTML=I),g&&(o.tt||(o.tt=q(c),P(o.tt,we()),$(o.tt,"btn"),x(o.tt,m,"all"),j(o.tt,u,()=>{b("all")})),o.tt.firstElementChild.innerHTML=g),v&&(o.je||(o.je=q(c),P(o.je,we()),$(o.je,"btn"),x(o.je,m,"necessary"),j(o.je,u,()=>{b([])})),o.je.firstElementChild.innerHTML=v),f&&(o.ot||(o.ot=q(c),P(o.ot,we()),$(o.ot,"btn"),$(o.ot,"btn--secondary"),x(o.ot,m,"show"),j(o.ot,"mouseenter",()=>{n.N||ve(e,t)}),j(o.ot,u,a)),o.ot.firstElementChild.innerHTML=f),o.nt||(o.nt=q(r),$(o.nt,d),g&&P(o.nt,o.tt),v&&P(o.nt,o.je),(g||v)&&P(o.We,o.nt),P(o.Ye,o.nt)),o.ot&&!o.st&&(o.st=q(r),o.je&&o.tt?($(o.st,d),P(o.st,o.ot),P(o.Ye,o.st)):(P(o.nt,o.ot),$(o.nt,d+"--uneven"))),E){if(!o.ct){let e=q(r),t=q(r);o.ct=q(r),$(e,"footer"),$(t,"links"),$(o.ct,"link-group"),P(t,o.ct),P(e,t),P(o.he,e)}o.ct.innerHTML=E}ge(0),n.D||(n.D=!0,te(h.re.ue,p,o.he),t(e),P(o.Ce,o.Qe),K(o.he),setTimeout(()=>_(o.Qe,"cc--anim"),100)),ee(1),J(o.We,e,ve,t)},Le=e=>{if(!E(e))return null;if(e in h.o._)return e;let t=e.slice(0,2);return t in h.o._?t:null},ke=()=>h.o.l||h.o.i.language.default,be=e=>{e&&(h.o.l=e)},Ie=async e=>{const t=h.o;let n=Le(e)?e:ke(),o=t._[n];if(!o)return!1;if(E(o)){const e=await(async e=>{try{const t=await fetch(e);return await t.json()}catch(e){return console.error(e),!1}})(o);if(!e)return!1;o=e}return t.u=o,be(n),!0},Se=()=>{let e=h.o.i.language.rtl,t=h.ne.Ce;e&&t&&(w(e)||(e=[e]),f(e,h.o.l)?_(t,"cc--rtl"):O(t,"cc--rtl"))},Te=()=>{const e=h.ne;if(e.Ce)return;e.Ce=q(r),e.Ce.id="cc-main",e.Ce.setAttribute("data-nosnippet",""),Se();let t=h.o.i.root;t&&E(t)&&(t=document.querySelector(t)),(t||e.$e.body).appendChild(e.Ce)},Ce=e=>ne(()=>localStorage.removeItem(e)),Be=(e,t)=>{if(t instanceof RegExp)return e.filter(e=>t.test(e));{const n=v(e,t);return n>-1?[e[n]]:[]}},qe=e=>{const{hostname:t,protocol:n}=location,{name:o,path:s,domain:a,sameSite:i,useLocalStorage:r}=h.t.cookie,c=e?(()=>{const e=h.o.S,t=e?new Date-e:0;return 864e5*U()-t})():864e5*U(),l=new Date;l.setTime(l.getTime()+c),h.o.p.expirationTime=l.getTime();const d=JSON.stringify(h.o.p);let u=o+"="+encodeURIComponent(d)+(0!==c?"; expires="+l.toUTCString():"")+"; Path="+s+"; SameSite="+i;f(t,".")&&(u+="; Domain="+a),"https:"===n&&(u+="; Secure"),r?((e,t)=>{ne(()=>localStorage.setItem(e,t))})(o,d):document.cookie=u,h.o.p},xe=(e,t,n)=>{if(0===e.length)return;const o=n||h.t.cookie.domain,s=t||h.t.cookie.path,a="www."===o.slice(0,4),i=a&&o.substring(4),r=(e,t)=>{document.cookie=e+"=; path="+s+(t?"; domain=."+t:"")+"; expires=Thu, 01 Jan 1970 00:00:01 GMT;"};for(const t of e)r(t),r(t,o),a&&r(t,i)},Me=e=>{const t=e||h.t.cookie.name,n=h.t.cookie.useLocalStorage;return((e,t)=>{let n;return n=ne(()=>JSON.parse(t?e:decodeURIComponent(e)),!0)||{},n})(n?(o=t,ne(()=>localStorage.getItem(o))||""):Ae(t,!0),n);var o},Ae=(e,t)=>{const n=document.cookie.match("(^|;)\\s*"+e+"\\s*=\\s*([^;]+)");return n?t?n.pop():e:""},Pe=e=>{const t=document.cookie.split(/;\s*/),n=[];for(const o of t){let t=o.split("=")[0];e?ne(()=>{e.test(t)&&n.push(t)}):n.push(t)}return n},_e=(e,o=[])=>{((e,t)=>{const{O:n,R:o,B:s,N:a,Z:i,X:r}=h.o;let c=[];if(e){w(e)?c.push(...e):E(e)&&(c="all"===e?n:[e]);for(const e of n)i[e]=f(c,e)?b(r[e]):[]}else c=o,a&&(c=(()=>{const e=h.ne.se;if(!e)return[];let t=[];for(let n in e)e[n].checked&&t.push(n);return t})());c=c.filter(e=>!f(n,e)||!f(t,e)),c.push(...s),V(c)})(e,o),(()=>{const e=h.o,{Z:t,B:n,Y:o,X:s,O:a}=e,i=a;e.te=H(o);for(const e of i){const a=s[e],i=b(a),r=t[e]&&t[e].length>0,c=f(n,e);if(0!==i.length){if(o[e]=[],c)o[e].push(...i);else if(r){const n=t[e];o[e].push(...n)}else o[e]=[];o[e]=I(o[e])}}})(),(()=>{const e=h.o;e.I=h.t.mode===n&&e.T?F(e.G,e.R):F(e.R,e.p.categories);let o=e.I.length>0,s=!1;for(const t of e.O)e.ee[t]=F(e.Y[t],e.te[t]),e.ee[t].length>0&&(s=!0);const a=h.ne.se;for(const t in a)a[t].checked=f(e.R,t);for(const t of e.O){const n=h.ne.ae[t],o=e.Y[t];for(const e in n)n[e].checked=f(o,e)}e.C||(e.C=new Date),e.M||(e.M=([1e7]+-1e3+-4e3+-8e3+-1e11).replace(/[018]/g,e=>(e^crypto.getRandomValues(new Uint8Array(1))[0]&15>>e/4).toString(16))),e.p={categories:H(e.R),revision:h.t.revision,data:e.h,consentTimestamp:e.C.toISOString(),consentId:e.M,services:H(e.Y)};let i=!1;const r=o||s;(e.T||r)&&(e.T&&(e.T=!1,i=!0),e.S=e.S?new Date:e.C,e.p.lastConsentTimestamp=e.S.toISOString(),qe(),h.t.autoClearCookies&&(i||r)&&(e=>{const t=h.o,n=Pe(),o=(e=>{const t=h.o;return(e?t.O:t.I).filter(e=>{const n=t.P[e];return!!n&&!n.readOnly&&!!n.autoClear})})(e);for(const e in t.ee)for(const o of t.ee[e]){const s=t.X[e][o].cookies;if(!f(t.Y[e],o)&&s)for(const e of s){const t=Be(n,e.name);xe(t,e.path,e.domain)}}for(const s of o){const o=t.P[s].autoClear,a=o&&o.cookies||[],i=f(t.I,s),r=!f(t.R,s),c=i&&r;if(e?r:c){o.reloadPage&&c&&(t.L=!0);for(const e of a){const t=Be(n,e.name);xe(t,e.path,e.domain)}}}})(i),oe()),i&&(te(h.re.ie),te(h.re.le),h.t.mode===t)||(r&&te(h.re.de),e.L&&(e.L=!1,location.reload()))})()},$e=e=>{const t=h.o.T?[]:h.o.R;return f(t,e)},De=(e,t)=>{const n=h.o.T?[]:h.o.Y[t];return f(n,e)},Oe=(e,t,n)=>{let o=[];const s=e=>{if(E(e)){let t=Ae(e);""!==t&&o.push(t)}else o.push(...Pe(e))};if(w(e))for(let t of e)s(t);else s(e);xe(o,t,n)},He=e=>{const{ne:t,o:n}=h;if(!n.k){if(!n.D){if(!e)return;Ee(Ue,Te)}n.k=!0,n.U=S(),n.v&&G(!0),Y(t.he,1),_(t.ye,o),x(t.he,l,"false"),setTimeout(()=>{z(h.ne.be)},100),te(h.re.fe,p)}},Re=()=>{const{ne:e,o:t,re:n}=h;t.k&&(t.k=!1,t.v&&G(),z(e.Ke,!0),O(e.ye,o),x(e.he,l,"true"),z(t.U),t.U=null,te(n._e,p))},Ne=()=>{const e=h.o;e.A||(e.N||ve(Ue,Te),e.A=!0,e.k?e.$=S():e.U=S(),Y(h.ne.we,2),_(h.ne.ye,s),x(h.ne.we,l,"false"),setTimeout(()=>{z(h.ne.ve)},100),te(h.re.fe,y))},je=()=>{const e=h.o;e.A&&(e.A=!1,(()=>{const e=Ve(),t=h.o.P,n=h.ne.se,o=h.ne.ae,s=e=>f(h.o.G,e);for(const a in n){const i=!!t[a].readOnly;n[a].checked=i||(e?$e(a):s(a));for(const t in o[a])o[a][t].checked=i||(e?De(t,a):s(a))}})(),z(h.ne.Ge,!0),O(h.ne.ye,s),x(h.ne.we,l,"true"),e.k?(z(e.$),e.$=null):(z(e.U),e.U=null),te(h.re._e,y))};var Ue={show:He,hide:Re,showPreferences:Ne,hidePreferences:je,acceptCategory:_e};const Fe=(e,t)=>{const n=Me(t);return e?n[e]:n},Ve=()=>!h.o.T;e.acceptCategory=_e,e.acceptService=(e,t)=>{const{O:n,X:o}=h.o;if(!(e&&t&&E(t)&&f(n,t)&&0!==b(o[t]).length))return!1;((e,t)=>{const n=h.o,{X:o,Z:s,N:a}=n,i=h.ne.ae[t]||{},r=h.ne.se[t]||{},c=b(o[t]);if(s[t]=[],E(e)){if("all"===e){if(s[t].push(...c),a)for(let e in i)i[e].checked=!0,B(i[e])}else if(f(c,e)&&s[t].push(e),a)for(let t in i)i[t].checked=e===t,B(i[t])}else if(w(e))for(let n of c){const o=f(e,n);o&&s[t].push(n),a&&(i[n].checked=o,B(i[n]))}const l=0===s[t].length;n.R=l?n.R.filter(e=>e!==t):I([...n.R,t]),a&&(r.checked=!l,B(r))})(e,t),_e()},e.acceptedCategory=$e,e.acceptedService=De,e.eraseCookies=Oe,e.getConfig=e=>{const t=h.t,n=h.o.i;return e?t[e]||n[e]:{...t,...n,cookie:{...t.cookie}}},e.getCookie=Fe,e.getUserPreferences=()=>{const{F:e,Y:t}=h.o,{accepted:n,rejected:o}=(()=>{const{T:e,R:t,O:n}=h.o;return{accepted:t,rejected:e?[]:n.filter(e=>!f(t,e))}})();return H({acceptType:e,acceptedCategories:n,rejectedCategories:o,acceptedServices:t,rejectedServices:R()})},e.hide=Re,e.hidePreferences=je,e.loadScript=(e,t)=>{let n=document.querySelector('script[src="'+e+'"]');return new Promise(o=>{if(n)return o(!0);if(n=q("script"),L(t))for(const e in t)x(n,e,t[e]);n.onload=()=>o(!0),n.onerror=()=>{n.remove(),o(!1)},n.src=e,P(document.head,n)})},e.reset=e=>{const{Ce:t,ye:n}=h.ne,{name:i,path:r,domain:c,useLocalStorage:l}=h.t.cookie;e&&(l?Ce(i):Oe(i,r,c));for(const{pe:e,me:t,ge:n}of h.o.m)e.removeEventListener(t,n);t&&t.remove(),n&&n.classList.remove(a,s,o);const d=new g;for(const e in h)h[e]=d[e];window._ccRun=!1},e.run=async e=>{const{o:t,t:o,re:s}=h,a=window;if(!a._ccRun){if(a._ccRun=!0,(e=>{const{ne:t,t:o,o:s}=h,a=o,r=s,{cookie:c}=a,l=h.ce,d=e.cookie,u=e.categories,m=b(u)||[],p=navigator,y=document;t.$e=y,t.ye=y.documentElement,c.domain=location.hostname,r.i=e,r.P=u,r.O=m,r._=e.language.translations,r.v=!!e.disablePageInteraction,l.ie=e.onFirstConsent,l.le=e.onConsent,l.de=e.onChange,l._e=e.onModalHide,l.fe=e.onModalShow,l.ue=e.onModalReady;const{mode:g,autoShow:v,lazyHtmlGeneration:w,autoClearCookies:E,revision:k,manageScriptTags:I,hideFromBots:S}=e;g===n&&(a.mode=g),"boolean"==typeof E&&(a.autoClearCookies=E),"boolean"==typeof I&&(a.manageScriptTags=I),"number"==typeof k&&k>=0&&(a.revision=k,r.V=!0),"boolean"==typeof v&&(a.autoShow=v),"boolean"==typeof w&&(a.lazyHtmlGeneration=w),!1===S&&(a.hideFromBots=!1),!0===a.hideFromBots&&p&&(r.J=p.userAgent&&/bot|crawl|spider|slurp|teoma/i.test(p.userAgent)||p.webdriver),L(d)&&(a.cookie={...c,...d}),a.autoClearCookies,r.V,a.manageScriptTags,(e=>{const{P:t,X:n,Y:o,Z:s,B:a}=h.o;for(let i of e){const e=t[i],r=e.services||{},c=L(r)&&b(r)||[];n[i]={},o[i]=[],s[i]=[],e.readOnly&&(a.push(i),o[i]=c),h.ne.ae[i]={};for(let e of c){const t=r[e];t.Se=!1,n[i][e]=t}}})(m),(()=>{if(!h.t.manageScriptTags)return;const e=h.o,t=C(document,"script["+i+"]");for(const n of t){let t=A(n,i),o=n.dataset.service||"",s=!1;if(t&&"!"===t.charAt(0)&&(t=t.slice(1),s=!0),"!"===o.charAt(0)&&(o=o.slice(1),s=!0),f(e.O,t)&&(e.oe.push({Me:n,xe:!1,ke:s,Te:t,De:o}),o)){const n=e.X[t];n[o]||(n[o]={Se:!1})}}})(),be((()=>{const e=h.o.i.language.autoDetect;if(e){const t={browser:navigator.language,document:document.documentElement.lang},n=Le(t[e]);if(n)return n}return ke()})())})(e),t.J)return;(()=>{const e=h.o,t=h.t,o=Me(),{categories:s,services:a,consentId:i,consentTimestamp:r,lastConsentTimestamp:c,data:l,revision:d}=o,u=w(s);e.p=o,e.M=i;const m=!!i&&E(i);e.C=r,e.C&&(e.C=new Date(r)),e.S=c,e.S&&(e.S=new Date(c)),e.h=void 0!==l?l:null,e.V&&m&&d!==t.revision&&(e.j=!1),e.T=!(m&&e.j&&e.C&&e.S&&u),t.cookie.useLocalStorage&&!e.T&&(e.T=(new Date).getTime()>(o.expirationTime||0),e.T&&Ce(t.cookie.name)),e.T,(()=>{const e=h.o;for(const t of e.O){const o=e.P[t];if(o.readOnly||o.enabled&&e.i.mode===n){e.G.push(t);const n=e.X[t]||{};for(let o in n)e.Y[t].push(o)}}})(),e.T?t.mode===n&&(e.R=[...e.G]):(e.Y={...e.Y,...a},V([...e.B,...s])),e.Z={...e.Y}})();const c=Ve();if(!await Ie())return!1;if(J(null,r=Ue,ve,Te),h.o.T&&Ee(r,Te),h.t.lazyHtmlGeneration||ve(r,Te),o.autoShow&&!c&&He(!0),c)return oe(),te(s.le);o.mode===n&&oe(t.G)}var r},e.setCookieData=e=>{let t,n=e.value,o=e.mode,s=!1;const a=h.o;if("update"===o){a.h=t=Fe("data");const e=typeof t==typeof n;if(e&&"object"==typeof t){!t&&(t={});for(let e in n)t[e]!==n[e]&&(t[e]=n[e],s=!0)}else!e&&t||t===n||(t=n,s=!0)}else t=n,s=!0;return s&&(a.h=t,a.p.data=t,qe(!0)),s},e.setLanguage=async(e,t)=>{if(!Le(e))return!1;const n=h.o;return!(e===ke()&&!0!==t||!await Ie(e)||(be(e),n.D&&Ee(Ue,Te),n.N&&ve(Ue,Te),Se(),0))},e.show=He,e.showPreferences=Ne,e.validConsent=Ve,e.validCookie=e=>""!==Ae(e,!0)},"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t((e="undefined"!=typeof globalThis?globalThis:e||self).CookieConsent={});