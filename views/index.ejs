<!DOCTYPE html>
<!-- ================= START OF I18N CHANGES ================ -->
<html lang="<%= lng %>" dir="<%= lng === 'ar' ? 'rtl' : 'ltr' %>">
<!-- ================= END OF I18N CHANGES ================== -->
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title><%= pageTitle %></title>
    <meta name="description" content="<%= metaDescription %>">
    <link rel="icon" type="image/png" href="/images/title-icon.webp">
    <link rel="stylesheet" href="/styles/style.css">

    <!-- ================================================== -->
    <!--     START: ADD AMIRI & CAIRO FOR ARABIC FONTS    -->
    <!-- ================================================== -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Amiri:wght@700&family=Cairo:wght@400;700&display=swap" rel="stylesheet">
    <!-- ================================================== -->
    <!--      END: ADD AMIRI & CAIRO FOR ARABIC FONTS     -->
    <!-- ================================================== -->


    <!-- ================================================== -->
    <!--        START: ADD SWIPERJS LIBRARY (CSS & JS)      -->
    <!-- ================================================== -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.css" />
    <script src="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.js"></script>
    <!-- ================================================== -->
    <!--         END: ADD SWIPERJS LIBRARY (CSS & JS)       -->
    <!-- ================================================== -->

</head>
<body class="no-scroll">

     <!-- ================= START OF I18N CHANGES ================ -->
    <%- include('partials/header', { t: t, lng: lng, pageType: pageType, currentUrl: currentUrl, user: user }) %>
    <!-- ================= END OF I18N CHANGES ================== -->

    <main>
        <!-- ================================================== -->
        <!--                 HERO SECTION                       -->
        <!-- ================================================== -->
        <section class="hero-section" id="hero-section" role="img" aria-label="Flacon d'huile Bloom posé devant un vase de fleurs">
            <div class="hero-content">
                <h1 class="hero-title"><%= t('home.heroTitle') %></h1>
                <p class="hero-text"><%= t('home.heroSubtitle') %></p>
                <a href="#nos-produits" class="btn-hero"><%= t('home.heroButton') %></a>
            </div>
        </section>

        <!-- ================================================== -->
        <!--                 COMMITMENT SECTION                 -->
        <!-- ================================================== -->
        <section class="commitment-section" id="commitment-section">
            <div class="commitment-container">
                <div class="commitment-image">
                    <img src="/images/promise02-image.webp" alt="Visible results on skin texture">
                </div>
                <div class="commitment-text">
                    <h2 class="commitment-title"><%= t('home.commitmentTitle') %></h2>
                    <p class="commitment-paragraph"><%= t('home.commitmentParagraph') %></p>
                    <p class="commitment-conclusion"><%= t('home.commitmentConclusion') %></p>
                </div>
            </div>
        </section>

       <!-- ================================================== -->
        <!--       PRODUCTS SECTION ("Nos Incontournables")     -->
        <!-- ================================================== -->
         <section class="product-showcase-section" id="nos-produits">
                <div class="showcase-container">
                    <h2 class="showcase-title"><%= t('home.featuredProducts') %></h2>
                    <div class="swiper product-carousel">
                        <div class="swiper-wrapper">
                            <% if (products && products.length > 0) { %>
                                <% products.forEach(product => { %>
                                    <div class="swiper-slide">
                                        <article class="product-card">
                                            <button class="wishlist-btn <%= (locals.userDetails && locals.userDetails.wishlist.some(item => item.productId && item.productId.toString() === product._id.toString())) ? 'active' : '' %>" aria-label="Ajouter à la wishlist" data-item-id="<%= product._id %>" data-item-type="Product">
                                                <svg class="heart-icon" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M21 8.25c0-2.485-2.099-4.5-4.688-4.5-1.935 0-3.597 1.126-4.312 2.733-.715-1.607-2.377-2.733-4.313-2.733C5.1 3.75 3 5.765 3 8.25c0 7.22 9 12 9 12s9-4.78 9-12z" /></svg>
                                            </button>
                                            <div class="product-image-wrapper">
                                                <img src="<%= (product.mainImage && product.mainImage.url) ? product.mainImage.url : product.mainImage %>" alt="<%= product.name[lng] || product.name.fr %>" class="product-image">
                                            </div>
                                            <div class="product-card-content">
                                                <h3><%= product.name[lng] || product.name.fr %></h3>
                                                <p class="product-description"><%= product.short_description[lng] || product.short_description.fr %></p>
                                                <span class="product-price"><%= formatPrice(product.price, lng) %></span>
                                                <a href="/produit/<%= product.id %>" class="product-btn"><%= t('buttons.viewDetails') %></a>
                                            </div>
                                        </article>
                                    </div>
                                <% }) %>
                            <% } %>
                        </div>
                        <div class="swiper-button-prev product-swiper-prev"></div>
                        <div class="swiper-button-next product-swiper-next"></div>
                    </div>
                    <a href="/boutique" class="view-all-link"><%= t('buttons.viewAllProducts') %> →</a>
                </div>
            </section>

                <!-- ================================================== -->
                <!--          START OF PACKS SECTION I18N CHANGES         -->
                <!-- ================================================== -->
                <section class="packs-section" id="packs">
                    <div class="showcase-container">
                        <h2 class="showcase-title"><%= t('home.featuredPacks') %></h2>
                        <div class="swiper packs-carousel">
                            <div class="swiper-wrapper">
                                <% if (packs && packs.length > 0) { %>
                                    <% packs.forEach(pack => { %>
                                        <div class="swiper-slide">
                                            <article class="pack-card">
                                                <button class="wishlist-btn <%= (locals.userDetails && locals.userDetails.wishlist.some(item => item.packId && item.packId.toString() === pack._id.toString())) ? 'active' : '' %>" aria-label="Ajouter à la wishlist" data-item-id="<%= pack._id %>" data-item-type="Pack">
                                                    <svg class="heart-icon" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M21 8.25c0-2.485-2.099-4.5-4.688-4.5-1.935 0-3.597 1.126-4.312 2.733-.715-1.607-2.377-2.733-4.313-2.733C5.1 3.75 3 5.765 3 8.25c0 7.22 9 12 9 12s9-4.78 9-12z" /></svg>
                                                </button>
                                                <div class="product-image-wrapper">
                                                    <img src="<%= (pack.mainImage && pack.mainImage.url) ? pack.mainImage.url : pack.mainImage %>" alt="<%= pack.name[lng] || pack.name.fr %>" class="product-image">
                                                </div>
                                                <div class="pack-card-content">
                                                    <h3><%= pack.name[lng] || pack.name.fr %></h3>
                                                    <p class="pack-contents"><%= pack.contents[lng] || pack.contents.fr %></p>
                                                    <div class="pack-pricing">
                                                        <span class="original-price"><%= formatPrice(pack.originalPrice, lng) %></span>
                                                        <span class="discounted-price"><%= formatPrice(pack.discountedPrice, lng) %></span>
                                                    </div>
                                                    <a href="/packs/<%= pack.id %>" class="product-btn"><%= t('buttons.viewDetails') %></a>
                                                </div>
                                            </article>
                                        </div>
                                    <% }) %>
                                <% } %>
                            </div>
                            <div class="swiper-button-prev packs-swiper-prev"></div>
                            <div class="swiper-button-next packs-swiper-next"></div>
                        </div>
                        <a href="/boutique#packs-section" class="view-all-link"><%= t('buttons.viewAllPacks') %> →</a>
                    </div>
                </section>
                <!-- ================================================== -->
                <!--           END OF PACKS SECTION I18N CHANGES          -->
                <!-- ================================================== -->

         <!-- ================================================== -->
        <!--             DELIVERY & PAYMENT SECTION             -->
        <!-- ================================================== -->
        <section class="delivery-info-section">
            <div class="delivery-info-container">
                <div class="info-box">
                    <div class="info-icon"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M6 2L3 6v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6l-3-4z"/><line x1="3" y1="6" x2="21" y2="6"/><path d="M16 10a4 4 0 0 1-8 0"/></svg></div>
                    <h3><%= t('home.deliveryBox1Title') %></h3>
                    <p><%= t('home.deliveryBox1Text') %></p>
                </div>
                <div class="info-box">
                    <div class="info-icon"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z"/><path d="M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z"/></svg></div>
                    <h3><%= t('home.deliveryBox2Title') %></h3>
                    <p><%= t('home.deliveryBox2Text') %></p>
                </div>
                <div class="info-box">
                    <div class="info-icon"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M1 3h15v13H1zM16 8h4l3 3v5h-7V8z"/><circle cx="5.5" cy="18.5" r="2.5"/><circle cx="18.5" cy="18.5" r="2.5"/></svg></div>
                    <h3><%= t('home.deliveryBox3Title') %></h3>
                    <p><%= t('home.deliveryBox3Text') %></p>
                </div>
            </div>
        </section>


         <!-- ================================================== -->
        <!--                 TESTIMONIALS SECTION               -->
        <!-- ================================================== -->
        <section class="testimonials-section">
            <h2 class="showcase-title"><%= t('home.testimonialsTitle') %></h2>
            <div class="perspective-carousel">
                <button class="carousel-nav prev-btn" aria-label="Témoignage précédent"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><polyline points="15 6 9 12 15 18" /></svg></button>
                <div class="carousel-cards">
                    <% const testimonials = t('home.testimonials', { returnObjects: true }); %>
                    <% if (testimonials && testimonials.length > 0) { %>
                        <% testimonials.forEach(testimonial => { %>
                            <div class="testimonial-card">
                                <div class="stars" aria-label="<%= testimonial.stars %> sur 5 étoiles">
                                    <% for(let i = 0; i < 5; i++) { %>
                                        <svg fill="<%= i < testimonial.stars ? 'currentColor' : 'none' %>" stroke="currentColor" stroke-width="1.5" viewBox="0 0 20 20"><path d="M10 15l-5.878 3.09 1.123-6.545L.489 6.91l6.572-.955L10 0l2.939 5.955 6.572.955-4.756 4.635 1.123 6.545z"/></svg>
                                    <% } %>
                                </div>
                                <p class="testimonial-text">"<%= testimonial.text %>"</p>
                                <footer class="customer-name">- <%= testimonial.author %></footer>
                            </div>
                        <% }) %>
                    <% } %>
                </div>
                <button class="carousel-nav next-btn" aria-label="Témoignage suivant"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><polyline points="9 6 15 12 9 18" /></svg></button>
            </div>
        </section>

        <!-- ================================================== -->
        <!--                 FINAL CTA SECTION                  -->
        <!-- ================================================== -->
        <section class="final-invitation-section">
            <div class="invitation-card">
                <img src="/images/CTA-image.webp" alt="Texture de sérum Bloom sur la peau" class="invitation-image">
                <h2 class="invitation-headline"><%= t('home.ctaTitle') %></h2>
                <p class="invitation-text"><%= t('home.ctaSubtitle') %></p>
                <a href="#nos-produits" class="invitation-btn"><%= t('home.ctaButton') %></a>
            </div>
        </section>
     </main>

     <%- include('partials/footer') %>
     <%- include('partials/modals') %>
 
</body>
</html>