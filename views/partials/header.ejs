<div class="loader-wrapper">
    <img src="/images/flower_loading.webp" alt="Loading..." class="loader-flower">
</div>

 <header class="header-section" id="header">
    <nav class="navigation-bar" aria-label="Main Navigation">
        <a href="/" class="nav-logo-link">
            <img src="/images/bloom-logo.webp" alt="Bloom Home" class="navigation-logo">
        </a>

        <ul class="nav-menu desktop-only">
            <% if (pageType === 'admin') { %>
                <li><a href="/admin/dashboard" class="nav-link">Tableau de Bord</a></li>
                <li><a href="/admin/products" class="nav-link">Inventaire</a></li>
                <li><a href="/admin/faq" class="nav-link">FAQ</a></li>
                <li><a href="/admin/testimonials" class="nav-link">Témoignages</a></li>
                <li><a href="/admin/reviews" class="nav-link">Avis</a></li>
                <li><a href="/admin/messages" class="nav-link">Messages</a></li>
            <% } else { %>
                <li><a href="/" class="nav-link"><%= t('nav.home') %></a></li>
                <li><a href="/#nos-produits" class="nav-link"><%= t('nav.products') %></a></li>
                <li><a href="/#packs" class="nav-link"><%= t('nav.packs') %></a></li>
                <li><a href="/resultats" class="nav-link"><%= t('nav.results') %></a></li>
                <li><a href="/faq" class="nav-link"><%= t('nav.faq') %></a></li>
                <li><a href="/contact" class="nav-link"><%= t('nav.contact') %></a></li>
            <% } %>
        </ul>

        <div class="nav-actions">
            <div class="lang-dropdown" id="lang-dropdown">
                <button type="button" class="lang-dropdown-toggle" id="lang-dropdown-toggle" aria-haspopup="true" aria-expanded="false" aria-label="Select language">
                    <svg class="globe-icon" xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="10"></circle><line x1="2" y1="12" x2="22" y2="12"></line><path d="M12 2a15.3 15.3 0 0 1 4 10 15.3 15.3 0 0 1-4 10 15.3 15.3 0 0 1-4-10 15.3 15.3 0 0 1 4-10z"></path></svg>
                    <% if (lng === 'fr') { %><span>FR</span><% } else { %><span>AR</span><% } %>
                    <svg class="caret-icon" xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3" stroke-linecap="round" stroke-linejoin="round"><polyline points="6 9 12 15 18 9"></polyline></svg>
                </button>
                <div class="lang-dropdown-menu" id="lang-dropdown-menu" role="menu">
                    <% if (lng === 'fr') { %>
                        <a href="<%= currentUrl.split('?')[0] %>?lang=ar" class="lang-dropdown-item" role="menuitem" lang="ar" hreflang="ar">العربية</a>
                    <% } else { %>
                        <a href="<%= currentUrl.split('?')[0] %>?lang=fr" class="lang-dropdown-item" role="menuitem" lang="fr" hreflang="fr">Français</a>
                    <% } %>
                </div>
            </div>
             <button id="theme-toggle-btn" class="nav-icon-btn" aria-label="Toggle theme">
                <svg class="sun-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"><path d="M12 7c-2.76 0-5 2.24-5 5s2.24 5 5 5 5-2.24 5-5-2.24-5-5-5zM2 13h2c.55 0 1-.45 1-1s-.45-1-1-1H2c-.55 0-1 .45-1 1s.45 1 1 1zm18 0h2c.55 0 1-.45 1-1s-.45-1-1-1h-2c-.55 0-1 .45-1 1s.45 1 1 1zm-9-8c.55 0 1-.45 1-1V2c0-.55-.45-1-1-1s-1 .45-1 1v2c0 .55.45 1 1 1zm0 16c.55 0 1-.45 1-1v-2c0-.55-.45-1-1-1s-1 .45-1 1v2c0 .55.45 1 1 1zM5.64 6.36c.39.39 1.02.39 1.41 0 .39-.39.39-1.02 0-1.41L5.64 3.54c-.39-.39-1.02-.39-1.41 0-.39.39-.39 1.02 0 1.41l1.41 1.41zm12.72 12.72c.39.39 1.02.39 1.41 0 .39-.39.39-1.02 0-1.41l-1.41-1.41c-.39-.39-1.02-.39-1.41 0-.39.39-.39 1.02 0 1.41l1.41 1.41zM5.64 17.64c-.39.39-.39 1.02 0 1.41.39.39 1.02.39 1.41 0l1.41-1.41c.39-.39.39-1.02 0-1.41-.39-.39-1.02-.39-1.41 0l-1.41 1.41zm12.72-12.72c-.39-.39-.39 1.02 0 1.41.39.39 1.02.39 1.41 0l1.41-1.41c.39-.39.39-1.02 0-1.41-.39-.39-1.02-.39-1.41 0l-1.41 1.41z"></path></svg>
                <svg class="moon-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"><path d="M9.37 5.51C9.19 6.15 9.1 6.82 9.1 7.5c0 4.08 3.32 7.4 7.4 7.4.68 0 1.35-.09 1.99-.27C17.45 17.19 14.93 19 12 19c-3.86 0-7-3.14-7-7 0-2.93 1.81-5.45 4.37-6.49z"></path></svg>
            </button>
            <% if (pageType === 'home') { %>
                <button id="search-toggle-btn" class="nav-icon-btn" aria-label="Open search">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"><path d="M15.5 14h-.79l-.28-.27A6.471 6.471 0 0 0 16 9.5 6.5 6.5 0 1 0 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"></path></svg>
                </button>
            <% } %>
            <% if (user) { %>
                <a href="/compte" class="nav-icon-btn user-account-icon" aria-label="<%= t('nav.myAccount') %>">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"><path d="M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"></path></svg>
                </a>
            <% } else { %>
                <a href="/login" class="nav-icon-btn user-account-icon" aria-label="<%= t('nav.login') %>">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"><path d="M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"></path></svg>
                </a>
            <% } %>
            <a href="/panier" class="nav-icon-btn cart-icon" aria-label="<%= t('nav.cart') %>">
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"><path d="M18 6h-2c0-2.21-1.79-4-4-4S8 3.79 8 6H6c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V8c0-1.1-.9-2-2-2zm-6-2c1.1 0 2 .9 2 2h-4c0-1.1.9-2 2-2zm6 16H6V8h2v2c0 .55.45 1 1 1s1-.45 1-1V8h4v2c0 .55.45 1 1 1s1-.45 1-1V8h2v12z"></path></svg>
                <span class="cart-item-count" style="display: none;">0</span>
            </a>
        </div>

        <button class="hamburger-menu" id="hamburger" aria-label="Toggle Navigation Menu" aria-expanded="false">
            <span class="bar"></span>
            <span class="bar"></span>
            <span class="bar"></span>
        </button>
    </nav>

    <div class="mobile-nav" id="mobile-menu">
        <div class="mobile-nav-top">
            <ul class="mobile-nav-list">
                <li><a href="/" class="mobile-nav-link"><%= t('nav.home') %></a></li>
                <li><a href="/#nos-produits" class="mobile-nav-link"><%= t('nav.products') %></a></li>
                <li><a href="/#packs" class="mobile-nav-link"><%= t('nav.packs') %></a></li>
                <li><a href="/resultats" class="mobile-nav-link"><%= t('nav.results') %></a></li>
                <li><a href="/faq" class="mobile-nav-link"><%= t('nav.faq') %></a></li>
                <li><a href="/contact" class="mobile-nav-link"><%= t('nav.contact') %></a></li>
            </ul>
            <hr class="mobile-nav-divider">
            <ul class="mobile-nav-list">
                 <% if (user) { %>
                    <li>
                        <a href="/compte" class="mobile-nav-link">
                            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"><path d="M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"></path></svg>
                            <%= t('nav.myAccount') %>
                        </a>
                    </li>
                    <li>
                        <a href="/logout" class="mobile-nav-link">
                            <svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 0 24 24" width="24px" fill="currentColor"><path d="M0 0h24v24H0z" fill="none"/><path d="M17 7l-1.41 1.41L18.17 11H8v2h10.17l-2.58 2.58L17 17l5-5zM4 5h8V3H4c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h8v-2H4V5z"/></svg>
                            <%= t('nav.logout') %>
                        </a>
                    </li>
                 <% } else { %>
                    <li>
                        <a href="/login" class="mobile-nav-link">
                            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"><path d="M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"></path></svg>
                            <%= t('nav.login') %>
                        </a>
                    </li>
                    <li>
                        <a href="/register" class="mobile-nav-link">
                            <svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 0 24 24" width="24px" fill="currentColor"><path d="M0 0h24v24H0z" fill="none"/><path d="M15 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm-9-2V7H4v3H1v2h3v3h2v-3h3v-2H6zm9 4c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"/></svg>
                            <%= t('nav.register') %>
                        </a>
                    </li>
                 <% } %>
                <li>
                    <a href="/panier" class="mobile-nav-link">
                        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"><path d="M18 6h-2c0-2.21-1.79-4-4-4S8 3.79 8 6H6c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V8c0-1.1-.9-2-2-2zm-6-2c1.1 0 2 .9 2 2h-4c0-1.1.9-2 2-2zm6 16H6V8h2v2c0 .55.45 1 1 1s1-.45 1-1V8h4v2c0 .55.45 1 1 1s1-.45 1-1V8h2v12z"></path></svg>
                        <%= t('nav.cart') %>
                    </a>
                </li>
            </ul>
        </div>
        <div class="mobile-nav-bottom">
            <div class="mobile-lang-switcher">
                <% if (lng === 'fr') { %>
                    <a href="<%= currentUrl.split('?')[0] %>?lang=ar" class="lang-link" lang="ar" hreflang="ar">العربية</a>
                <% } else { %>
                    <a href="<%= currentUrl.split('?')[0] %>?lang=fr" class="lang-link" lang="fr" hreflang="fr">Français</a>
                <% } %>
            </div>
            <div class="mobile-theme-switcher">
                <svg class="sun-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"><path d="M12 7c-2.76 0-5 2.24-5 5s2.24 5 5 5 5-2.24 5-5-2.24-5-5-5zM2 13h2c.55 0 1-.45 1-1s-.45-1-1-1H2c-.55 0-1 .45-1 1s.45 1 1 1zm18 0h2c.55 0 1-.45 1-1s-.45-1-1-1h-2c-.55 0-1 .45-1 1s.45 1 1 1zm-9-8c.55 0 1-.45 1-1V2c0-.55-.45-1-1-1s-1 .45-1 1v2c0 .55.45 1 1 1zm0 16c.55 0 1-.45 1-1v-2c0-.55-.45-1-1-1s-1 .45-1 1v2c0 .55.45 1 1 1zM5.64 6.36c.39.39 1.02.39 1.41 0 .39-.39.39-1.02 0-1.41L5.64 3.54c-.39-.39-1.02-.39-1.41 0-.39.39-.39 1.02 0 1.41l1.41 1.41zm12.72 12.72c.39.39 1.02.39 1.41 0 .39-.39.39-1.02 0-1.41l-1.41-1.41c-.39-.39-1.02-.39-1.41 0-.39.39-.39 1.02 0 1.41l1.41 1.41zM5.64 17.64c-.39.39-.39 1.02 0 1.41.39.39 1.02.39 1.41 0l1.41-1.41c.39-.39.39-1.02 0-1.41-.39-.39-1.02-.39-1.41 0l-1.41 1.41zm12.72-12.72c-.39-.39-.39 1.02 0 1.41.39.39 1.02.39 1.41 0l1.41-1.41c.39-.39.39-1.02 0-1.41-.39-.39-1.02-.39-1.41 0l-1.41 1.41z"></path></svg>
                <input type="checkbox" id="mobile-theme-toggle" class="theme-switch-checkbox">
                <label for="mobile-theme-toggle" class="theme-switch-label">
                    <span class="theme-switch-thumb"></span>
                </label>
                <svg class="moon-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"><path d="M9.37 5.51C9.19 6.15 9.1 6.82 9.1 7.5c0 4.08 3.32 7.4 7.4 7.4.68 0 1.35-.09 1.99-.27C17.45 17.19 14.93 19 12 19c-3.86 0-7-3.14-7-7 0-2.93 1.81-5.45 4.37-6.49z"></path></svg>
            </div>
        </div>
    </div>
 </header>

<div id="login-prompt-modal" class="prompt-modal">
    <div class="prompt-modal-content admin-confirm-content">
        <button class="modal-close-btn" id="login-prompt-close-btn">×</button>
        <div class="confirm-icon" style="color: var(--accent-color); background-color: rgba(217, 184, 180, 0.2);">
            <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor">
              <path stroke-linecap="round" stroke-linejoin="round" d="M15.75 6a3.75 3.75 0 11-7.5 0 3.75 3.75 0 017.5 0zM4.501 20.118a7.5 7.5 0 0114.998 0A17.933 17.933 0 0112 21.75c-2.676 0-5.216-.584-7.499-1.632z" />
            </svg>
        </div>
        <h3><%= t('modals.loginRequiredTitle') %></h3>
        <p><%= t('modals.loginRequiredForWishlist') %></p>
        <div class="prompt-modal-actions">
            <a href="/login" class="admin-btn btn-secondary" style="background-color: var(--accent-color); color: var(--background-color);"><%= t('nav.login') %></a>
            <a href="/register" class="admin-btn btn-secondary" style="background: none; border: 2px solid var(--accent-color); color: var(--text-color);"><%= t('buttons.createAccount') %></a>
        </div>
    </div>
 </div>

 <div class="nav-overlay" id="nav-overlay"></div>
