<!-- ================================================== -->
<!--        STEP 3.1: ADD THIS NEW REVIEW MODAL         -->
<!-- ================================================== -->
<div id="review-modal" class="prompt-modal">
    <div class="prompt-modal-content">
        <button id="review-modal-close-btn" class="modal-close-btn">×</button>
        <h3><%= t('modals.reviewTitle') %></h3>
        <form id="review-form" novalidate>
            <div class="form-group">
                <label><%= t('modals.yourRating') %></label>
                <div class="star-rating-input"></div>
                <input type="hidden" name="rating" id="rating-input" value="0">
            </div>
            <div class="form-group">
                <label for="review-comment"><%= t('modals.yourComment') %></label>
                <textarea id="review-comment" name="comment" rows="4" placeholder="<%= t('modals.commentPlaceholder') %>" required></textarea>
            </div>
            <div id="review-form-error" class="form-error-message" style="display: none;"></div>
            <button type="submit" class="btn-product-primary"><%= t('buttons.submitReview') %></button>
        </form>
    </div>
</div>
<!-- ================================================== -->





<!-- Login Prompt Modal (This is for the "Leave a Review" button) -->
<div id="login-prompt-modal" class="prompt-modal">
    <div class="prompt-modal-content">
        <button id="prompt-modal-close-btn" class="modal-close-btn">×</button>
        <h3><%= t('modals.loginRequiredTitle') %></h3>
        <p><%= t('modals.loginRequiredForReview') %></p>
        <div class="prompt-modal-actions">
            <a href="/login" class="btn-product-secondary"><%= t('nav.login') %></a>
            <a href="/register" class="btn-product-primary"><%= t('buttons.createAccount') %></a>
        </div>
    </div>
</div>

<!-- NEW, CLEAN Checkout Modal (This is the only one we need for checkout) -->
<div id="checkout-modal" class="checkout-modal">
    <div class="checkout-modal-content">
        <button id="modal-close-btn" class="modal-close-btn">×</button>
        <h2>Finaliser ma commande</h2>
        <form id="checkout-form" novalidate>
            <div class="form-group">
                <label for="fullName">Nom et Prénom</label>
                <input type="text" id="fullName" name="fullName" required>
                <small class="error-message">Ce champ est requis.</small>
            </div>
            <div class="form-group">
                <label for="phone">Numéro de téléphone</label>
                <input type="tel" id="phone" name="phone" required>
                <small class="error-message">Numéro de téléphone invalide.</small>
            </div>
            <div class="form-group" id="address-group" style="display: none;">
                <label for="address">Votre adresse complète</label>
                <textarea id="address" name="address" placeholder="Commune, rue, etc..."></textarea>
                <small class="error-message">L'adresse est requise pour la livraison à domicile.</small>
            </div>
            <div class="order-summary">
                <p class="summary-total"><span>Total à payer:</span> <span id="modal-summary-total">0,00 DA</span></p>
            </div>
            <button type="submit" class="btn-confirm-order">
                <span class="btn-text">Confirmer la commande</span>
                <span class="btn-spinner"></span>
            </button>
        </form>
    </div>
</div>


<!-- Cart Item Delete Confirmation Modal -->
<div id="cart-confirm-modal" class="prompt-modal">
    <div class="prompt-modal-content admin-confirm-content">
        <div class="admin-confirm-icon">
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M10.29 3.86L1.82 18a2 2 0 0 0 1.71 3h16.94a2 2 0 0 0 1.71-3L13.71 3.86a2 2 0 0 0-3.42 0z"></path><line x1="12" y1="9" x2="12" y2="13"></line><line x1="12" y1="17" x2="12.01" y2="17"></line></svg>
        </div>
        <h3><%= t('modals.confirmDeleteTitle') %></h3>
        <p><%= t('modals.confirmDeleteItem') %></p>
        <div class="admin-prompt-actions">
            <button id="cart-confirm-cancel-btn" class="admin-btn admin-btn--secondary"><%= t('buttons.cancel') %></button>
            <button id="cart-confirm-confirm-btn" class="admin-btn admin-btn--danger"><%= t('buttons.delete') %></button>
        </div>
    </div>
</div>


 <div id="search-overlay" class="search-overlay">
    <button class="search-close-btn" id="search-close-btn" aria-label="<%= t('aria.closeSearch') %>">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"><path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 5 6.41z"></path></svg>
    </button>
    <div class="search-content">
           <input type="text" id="search-input" class="search-input" placeholder="<%= t('search.placeholder') %>" aria-label="Search input">
        <div id="search-results-container" class="search-results-container"></div>
    </div>
</div>
    


<!-- Review Delete Confirmation Modal -->
<div id="review-delete-confirm-modal" class="prompt-modal">
    <div class="prompt-modal-content admin-confirm-content">
        <div class="confirm-icon">
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M10.29 3.86L1.82 18a2 2 0 0 0 1.71 3h16.94a2 2 0 0 0 1.71-3L13.71 3.86a2 2 0 0 0-3.42 0z"></path><line x1="12" y1="9" x2="12" y2="13"></line><line x1="12" y1="17" x2="12.01" y2="17"></line></svg>
        </div>
        <h3><%= t('modals.confirmDeleteTitle') %></h3>
        <p><%= t('modals.confirmDeleteReview') %></p>
        <div class="admin-prompt-actions">
            <button id="review-delete-cancel-btn" class="admin-btn admin-btn--secondary"><%= t('buttons.cancel') %></button>
            <button id="review-delete-confirm-btn" class="admin-btn admin-btn--danger"><%= t('buttons.delete') %></button>
        </div>
    </div>
</div>